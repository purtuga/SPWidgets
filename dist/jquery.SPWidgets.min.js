/*! SPWidgets v2.5.2 2015-10-17 | MIT | Copyright (c) 2015 Paul Tavares | http://purtuga.github.io/SPWidgets */

!function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y;!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(Z){a=function(a){var b=function(){function b(a){return a&&"/"!==a.charAt(a.length-1)&&(a+="/"),a.indexOf("http")>-1?a:a=document.location.protocol+"//"+document.location.hostname+(80!==Number(document.location.port)&&Number(document.location.port)>0?document.location.port:"")+a}var c={};return function(d){var e="",f=!1,g="getSiteUrl(): Unable to determine site url from "+d;if(d||(d=document.location.href,f=!0),e=d,d.indexOf("?")>-1?e=d.substr(0,d.indexOf("?")):d.indexOf("#")>-1&&(e=d.substr(0,d.indexOf("#"))),!e)throw new Error(g);if(c[e])return c[e];if(f&&("undefined"!=typeof _spPageContextInfo&&_spPageContextInfo.webServerRelativeUrl&&(c[e]=_spPageContextInfo.webServerRelativeUrl),!c[e]&&"undefined"!=typeof L_Menu_BaseUrl&&L_Menu_BaseUrl&&(c[e]=L_Menu_BaseUrl),c[e]))return c[e]=b(c[e]),c[e];if(c[e]||a.ajax({type:"POST",cache:!1,async:!1,url:document.location.protocol+"//"+document.location.host+"/_vti_bin/Webs.asmx",data:"<soap:Envelope xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xmlns:xsd='http://www.w3.org/2001/XMLSchema' xmlns:soap='http://schemas.xmlsoap.org/soap/envelope/'><soap:Body><WebUrlFromPageUrl xmlns='http://schemas.microsoft.com/sharepoint/soap/' ><pageUrl>"+e+"</pageUrl></WebUrlFromPageUrl></soap:Body></soap:Envelope>",contentType:"text/xml; charset=utf-8",dataType:"xml",success:function(b){c[e]=a(b).find("WebUrlFromPageUrlResult").text()||""}}),!c[e])throw delete c[e],new Error(g);return c[e]=b(c[e]),c[e]||""}}();return b}(Z),b=function(){var a=function(){var a={},b=function(a,c){return a?"undefined"==typeof c?b.get(a):b.set(a,c):void 0};return b.clear=function(b){delete a[b]},b.clearAll=function(){a={}},b.get=function(b){return a[b]},b.set=function(b,c){return a[b]=c,c},b.isCached=function(b){return a.hasOwnProperty(b)?!0:!1},b}();return a}(),c=function(){var a=function(a){var b,c,d=a||{},e=Array.prototype.slice.call(arguments,1),f=e.length;for(b=0;f>b;b++)if(e[b])for(c in e[b])e[b].hasOwnProperty(c)&&(d[c]=e[b][c]);return d};return a}(),d=function(){"undefined"==typeof WeakMap&&!function(){var a=Object.defineProperty,b=Date.now()%1e9,c=function(){this.name="__st"+(1e9*Math.random()>>>0)+(b++ +"__")};c.prototype={set:function(b,c){var d=b[this.name];return d&&d[0]===b?d[1]=c:a(b,this.name,{value:[b,c],writable:!0}),this},get:function(a){var b;return(b=a[this.name])&&b[0]===a?b[1]:void 0},"delete":function(a){var b=a[this.name];return b&&b[0]===a?(b[0]=b[1]=void 0,!0):!1},has:function(a){var b=a[this.name];return b?b[0]===a:!1}},window.WeakMap=c}();var a={stash:new WeakMap,create:function(){return new WeakMap}};return a}(),e=function(a,b){var c=function(a){var b,c=[];for(b in a)c.push(b);return c},d=Object.create,e=b.stash,f={isDestroyed:!1,init:function(){},destroy:function(){var a,b=this.__onDestroy;b&&(a=e.get(b),Array.isArray(a)&&a.forEach(function(b,c){"function"==typeof b&&b(),a[c]=null}),e["delete"](b)),e["delete"](this),this.isDestroyed=!0},onDestroy:function(a){if(this.__onDestroy||(this.__onDestroy=function(){}),"function"==typeof a){var b=this.__onDestroy,c=e.get(b);c||(c=[],e.set(b,c)),c.push(a)}}},g={extend:function(){var b=Array.prototype.slice.call(arguments),e=function(){};return e.prototype=b.reduce(function(a,b){if(b){var d=b.prototype||b;c(d).forEach(function(b){a[b]=d[b]})}return a},d(this.prototype)),a(e,this)},isInstanceOf:function(a){if(!a)return!1;var b=c(this.prototype);return!b.some(function(b){return"undefined"==typeof a[b]})},create:function(){var a=d(this.prototype);return a.init&&a.init.apply(a,arguments),a}},h=function(){};return h.prototype=d(f),a(h,g),h}(c,d),f=function(a){var b=function(b){var d,e,f,g,h=a.extend({},{xDoc:null,nodeName:"",asJQuery:!1,cleanAttr:!0,nodeModel:null,nodeModelOptions:null,convertTypes:!1},b),i=h.xDoc.getElementsByTagName(h.nodeName);if(0===i.length&&"z:row"===h.nodeName&&(i=h.xDoc.getElementsByTagName("row")),0===i.length&&"rs:data"===h.nodeName&&(i=h.xDoc.getElementsByTagName("data")),h.asJQuery===!0)return a(i);for(e=[],d=function(b){var d,e,f,g=b.attributes,i={};for(e=0,f=g.length;f>e;e++)d=g[e].name,h.cleanAttr&&d.indexOf("ows_")>-1&&(d=d.replace("ows_","")),i[d]=h.convertTypes?c(g[e].value):g[e].value;return i.___xmlNode=b,h.nodeModel&&h.nodeModel.create?h.nodeModel.create(i,a.extend({},h.nodeModelOptions,{source:b})):i},f=0,g=i.length;g>f;f++)e.push(d(i[f]));return e},c=function(a){if(!a)return a;var b=a;switch(a.toUpperCase()){case"TRUE":b=!0;break;case"FALSE":b=!1}return b};return b.getJsNativeFromString=c,b}(Z),g=function(a,b,c,d){var e=c.stash,f={init:function(a,c){var d,i=this,j=b({},f.defaults,c);j.type=j.type.toLowerCase(),j.source=a,e.set(i,j),"xml"===j.type?d=g.call(i,j.source):"json"===j.type&&(d=h.call(i,j.source)),b(i,d)},getSource:function(){return e.get(this).source},getListUrl:function(){var a,b=e.get(this);return b.webURL?(a=b.webURL.substr(0,b.webURL.indexOf(this.WebFullUrl)),a?a+this.RootFolder:this.RootFolder||""):this.RootFolder||""}},g=function(a){var b=d({xDoc:a,nodeName:"List",convertTypes:!0}).shift();return delete b.Fields,delete b.RegionalSettings,delete b.ServerSettings,delete b.___xmlNode,b},h=function(){};return f=a.extend(f),f.defaults={type:"xml"},f}(e,c,d,f),h=function(a){var b=function(b){var c=a(b),d=c.find("ErrorCode"),e=!1;return d.length?(d.each(function(){return"0x00000000"!==a(this).text()&&"NoError"!==a(this).text()?(e=!0,!1):void 0}),e):c.find("faultcode").length?!0:c.find("CopyResult[ErrorMessage]").length?!0:!1};return b}(Z),i=function(a,b,c,d,e){var f=function(a){return g.call(this,a)},g=function(d){var g,h=a.extend({},f.defaults,d),i=function(a){return h.webURL+"?List="+a};return h.webURL?"/"!==h.webURL.charAt(h.webURL.length-1)&&(h.webURL+="/"):h.webURL=c(),h.webURL+="_vti_bin/Lists.asmx",h.cacheKey=i(h.listName),h.isCached=b.isCached(h.cacheKey),h.cacheXML&&h.isCached?b(h.cacheKey):(h.isCached&&b.clear(h.cacheKey),g=a.Deferred(function(c){a.ajax({type:"POST",cache:!1,async:h.async,url:h.webURL,contentType:"text/xml;charset=utf-8",dataType:"xml",data:'<?xml version="1.0" encoding="utf-8"?><soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"><soap:Body><GetList xmlns="http://schemas.microsoft.com/sharepoint/soap/"><listName>'+h.listName+"</listName></GetList></soap:Body></soap:Envelope>"}).then(function(d){if(e(d))return void c.rejectWith(a,arguments);var f=h.ListModel.create(d,{webURL:h.webURL});h.cacheXML&&(0===h.listName.indexOf("{")?b(i(f.Title),g):b(i(f.ID),g)),c.resolveWith(a,[f])}).fail(function(){c.rejectWith(a,arguments),h.cacheXML&&b.clear(h.cacheKey)})}).promise(),h.cacheXML&&b(h.cacheKey,g),g)};return f.defaults={listName:"",webURL:"",cacheXML:!0,async:!0,ListModel:d},f}(Z,b,a,g,h),j=function(a,b,c){var d=c.stash;return a.extend({init:function(a,c){var e=b({},{list:null,webURL:null},c);a&&b(this,a),d.set(this,e)}})}(e,c,d),k=function(a,b,c,d,e,f){var g=function(){var g=null,h=function(){return g.apply(this,arguments)};return h.defaults={listName:"",webURL:"",viewName:"",CAMLViewFields:"",CAMLQuery:"",CAMLRowLimit:"",CAMLQueryOptions:"",operation:"GetListItems",cacheXML:!1,async:!0,completefunc:null,changeToken:"",listItemModel:f},g=function(f){var g,i=a.extend({},h.defaults,f);return i.webURL?"/"!==i.webURL.charAt(i.webURL.length-1)&&(i.webURL+="/"):i.webURL=c(),i.webURL+="_vti_bin/Lists.asmx",i.cacheKey=i.webURL+"?"+[i.listName,i.viewName,i.CAMLViewFields,i.CAMLQuery,i.CAMLRowLimit,i.CAMLQueryOptions,i.operation,i.changeToken].join("|"),i.isCached=b.isCached(i.cacheKey),i.cacheXML&&i.isCached?(g=b(i.cacheKey),a.isFunction(i.completefunc)&&g.then(function(a,b,c){i.completefunc(b,c,a)}),g):(i.isCached&&b.clear(i.cacheKey),g=a.Deferred(function(c){a.ajax({type:"POST",cache:!1,async:i.async,url:i.webURL,contentType:"text/xml;charset=utf-8",dataType:"xml",data:'<?xml version="1.0" encoding="utf-8"?><soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"><soap:Body><'+i.operation+' xmlns="http://schemas.microsoft.com/sharepoint/soap/"><listName>'+i.listName+"</listName><viewName>"+(i.viewName||"")+"</viewName><query>"+(i.CAMLQuery||"<Query></Query>")+"</query><viewFields>"+(i.CAMLViewFields||"<ViewFields></ViewFields>")+"</viewFields><rowLimit>"+(i.CAMLRowLimit||0)+"</rowLimit><queryOptions>"+(i.CAMLQueryOptions||"<QueryOptions></QueryOptions>")+"</queryOptions>"+("GetListItemChangesSinceToken"===i.operation?"<changeToken>"+i.changeToken+"</changeToken>":"")+"</"+i.operation+"></soap:Body></soap:Envelope>",complete:function(f,g){var h=[];return"error"===g||e(f)?(i.cacheXML&&b.clear(i.cacheKey),c.rejectWith(a,[h,f,g]),void(a.isFunction(i.completefunc)&&i.completefunc(f,g,h))):(h=d({xDoc:f.responseXML,nodeName:"z:row",nodeModel:i.listItemModel}),c.resolveWith(a,[h,f,g]),void(a.isFunction(i.completefunc)&&i.completefunc(f,g,h)))}})}).promise(),i.cacheXML&&b(i.cacheKey,g),g)},h}();return g}(Z,b,a,f,h,j),l=function(a,b,c,d,e,f){var g=d.stash,h={init:function(a,b){var d=c({},h.defaults,b);a&&c(this,a),g.set(this,d)},getColumnValues:function(){var b=this,c=a(g.get(this).source),d=b.Type,e=[];switch(d){case"Choice":case"MultiChoice":c.find("CHOICE").each(function(){e.push(a(this).text()||"")});break;case"Lookup":case"LookupMulti":f({listName:b.List,cacheXML:!0,async:!1,CAMLQuery:'<Query><OrderBy><FieldRef Name="'+b.ShowField+'"/></OrderBy></Query>',CAMLViewFields:'<ViewFields><FieldRef Name="'+b.ShowField+'"/></ViewFields>'}).then(function(a){e=a})}return e},getList:function(){return g.get(this).list}};return h=b.extend(h),h.defaults={list:null,type:"xml",source:null},h}(Z,e,c,d,f,k),m=function(a,b,c,d,e,f){var g=f.stash,h=function(c){var e=a.extend({},h.defaults,"string"==typeof c?{listName:c}:c);return a.Deferred(function(c){b({listName:e.listName,cacheXML:e.cacheXML,webURL:e.webURL,async:e.async}).then(function(b){e.listDef=b;var f,h,j=d({xDoc:b.getSource(),nodeName:"Field",nodeModel:e.ListColumnModel,nodeModelOptions:{list:b}}),k=[];for(f=0,h=j.length;h>f;f++)void 0!==j[f].Hidden&&"FALSE"!==j[f].Hidden||void 0!==j[f].List&&("Docs"===j[f].List||"AppPrincipals"===j[f].List)||!j[f].DisplayName||void 0!==j[f].AuthoringInfo||e.columnName&&j[f].Name!==e.columnName&&j[f].StaticName!==e.columnName&&j[f].DisplayName!==e.columnName?e.ListModel&&j[f].destroy():(j[f].___xmlNode&&delete j[f].___xmlNode,k.push(j[f]),e.columnName&&(f+=h));a.extend(k,i),g.set(k,e),c.resolveWith(a,[k])}).fail(function(){c.rejectWith(a,Array.prototype.slice.call(arguments,0))})}).promise()},i={getColumn:function(a){var b,c=this;return c.some(function(c){(c.Name===a||c.DisplayName===a||c.StaticName===a)&&(b=c)}),b},getList:function(){return g.has(this)?g.get(this).listDef:void 0}};return h.defaults={listName:"",columnName:"",cacheXML:!0,async:!0,webURL:null,ListColumnModel:e},h}(Z,i,b,f,l,d),n=function(a,b,c,d){var e=function(){var e=null,f=function(){return e.apply(this,arguments)};return f.defaults={listName:"",webURL:"",cacheXML:!1,async:!0,completefunc:null},e=function(e){var g,h=a.extend({},f.defaults,e);return h.webURL?"/"!==h.webURL.charAt(h.webURL.length-1)&&(h.webURL+="/"):h.webURL=c(),h.webURL+="_vti_bin/Forms.asmx",h.cacheKey=h.webURL+"?List="+h.listName,h.isCached=b.isCached(h.cacheKey),h.cacheXML&&h.isCached?(g=b(h.cacheKey),a.isFunction(h.completefunc)&&g.then(function(a,b){h.completefunc(a,b)}),g):(g=a.Deferred(function(c){h.isCached&&b.clear(h.cacheKey),a.ajax({type:"POST",cache:!1,async:h.async,url:h.webURL,contentType:"text/xml;charset=utf-8",dataType:"xml",data:'<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"><soap:Body><GetFormCollection xmlns="http://schemas.microsoft.com/sharepoint/soap/"><listName>'+h.listName+"</listName></GetFormCollection></soap:Body></soap:Envelope>",complete:function(e,f){return"error"===f||d(e)?(h.cacheXML&&b.clear(h.cacheKey),void c.rejectWith(a,[e,f])):(c.resolveWith(a,[e,f]),void(a.isFunction(h.completefunc)&&h.completefunc(e,f)))}})}).promise(),h.cacheXML&&b(h.cacheKey,g),g)},f}();return e}(Z,b,a,h),o=function(a){var b=function(b){var c=a(b),d="",e=c.find("ErrorCode"),f=0;return e.length||(e=c.find("faultcode")),!e.length&&(e=c.find("CopyResult[ErrorMessage]"),e.length)?(e.each(function(){var b=a(this);f+=1,d+="("+f+") "+(b.attr("ErrorCode")||"unknown")+": "+b.attr("ErrorMessage")+"\n"}),f+" error(s) encountered! \n"+d):e.length?(e.each(function(){var b=a(this);"0x00000000"!==b.text()&&(f+=1,d+="("+f+") "+b.text()+": "+b.parent().children().not(b).text()+"\n")}),d=f+" error(s) encountered! \n"+d):""};return b}(Z),p=function(a,b,c,d){var e=function(b){function c(a){var c,d,f,g="";for(c=0,d=a.length;d>c;c++){g="";for(f in a[c])a[c].hasOwnProperty(f)&&(g+='<Field Name="'+f+'">'+a[c][f]+"</Field>");g&&(e.push('<Method ID="'+b.counter+'" Cmd="'+b.updateType+'">'+g+"</Method>"),b.counter++)}}function d(c){var d,f,g="";for(d=0,f=c.length;f>d;d++)a.isArray(c[d])&&(g+='<Field Name="'+c[d][0]+'">'+c[d][1]+"</Field>");g&&(e.push('<Method ID="'+b.counter+'" Cmd="'+b.updateType+'">'+g+"</Method>"),b.counter++)}var e=[],f=typeof b.updates;return!b.updates&&b.ID&&b.valuepairs?(b.valuepairs.push(["ID",b.ID]),d(b.valuepairs)):"string"===f?e.push(b.updates):a.isArray(b.updates)&&b.updates.length&&(f=typeof b.updates[0],"object"===f?c(b.updates):"string"===f?e.push.apply(e,b.updates):a.isArray(b.updates[0])&&d(b.updates)),e},f=function(g){var h=a.extend({},f.defaults,g,{counter:1});return h.webURL?"/"!==h.webURL.charAt(h.webURL.length-1)&&(h.webURL+="/"):h.webURL=b(),h.updateType=h.batchCmd||h.updateType,h._updates=e(h).join(""),/<\/Batch>/.test(h._updates)||(h._updates='<Batch OnError="Continue">'+h._updates+"</Batch>"),a.Deferred(function(b){a.ajax({type:"POST",cache:!1,async:h.async,url:h.webURL+"_vti_bin/Lists.asmx",beforeSend:function(a){a.setRequestHeader("SOAPAction","http://schemas.microsoft.com/sharepoint/soap/UpdateListItems")},contentType:"text/xml;charset=utf-8",dataType:"xml",data:'<?xml version="1.0" encoding="utf-8"?><soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"><soap:Body><UpdateListItems xmlns="http://schemas.microsoft.com/sharepoint/soap/"><listName>'+h.listName+"</listName><updates>"+h._updates+"</updates></UpdateListItems></soap:Body></soap:Envelope>",complete:function(b,c){a.isFunction(h.completefunc)&&h.completefunc.call(a,b,c)}}).always(function(e,f,g){var h={status:"",message:"",httpData:e,xhrRequest:g};"error"===f?(h.status="error",h.message=e.statusText||"HTTP error.",b.rejectWith(a,[h])):c(e)?(h.status="error",h.message=d(e),b.rejectWith(a,[h])):(h.status="success",h.message="Update Successful.",b.resolveWith(a,[h]))})}).promise()};return f.defaults={listName:"",webURL:"",async:!0,completefunc:null,updates:"",updateType:"Update",updateOnError:"Continue"},f}(Z,a,h,o),q=function(a){var b=function(b,c){var d,e,f,g,h,i,j={};if("object"==typeof b&&1===arguments.length&&(c=b.data,b=b.tmplt),j.response="",j.template="string"!=typeof b?String(a("<div/>").append(b).html()):b,j.tokens=j.template.match(/(\{\{.*?\}\})/g),a.isArray(c)||(c=c?[c]:[{}]),null!==j.tokens)for(f=0,g=c.length;g>f;f++){for(h=j.template,d=0,e=j.tokens.length;e>d;d++)j.tokens[d]=j.tokens[d].replace(/[\{\}]/g,""),i=c[f][j.tokens[d]]||"",a.isFunction(i)&&(i=i()),h=h.replace("{{"+j.tokens[d]+"}}",i);j.response+=h}else j.response=j.template;return j.response};return b}(Z),r=function(a){var b=function(b,c,d){var e=0,f=a(b);return d||(d="height"),f.each(function(){var b=a(this).css(d,"");e<b.outerHeight(!0)&&(e=b.outerHeight(!0))}),e>0&&(c&&(e+=c),f.css(d,e)),b};return b}(Z),s=function(a){var b=function(b){return a(b).each(function(){if(!a(this).hasClass("addHoverEffectDone")){a(this).addClass("addHoverEffectDone");var b=this;a(b).mouseenter(function(){a(b).toggleClass("ui-state-hover")}),a(b).mouseleave(function(){a(b).toggleClass("ui-state-hover")})}})};return b}(Z),t='<div class="spwidget-board"> <div class="spwidget-board-settings" style="display:none"> <div class="spwidget-board-settings-columns">Columns</div> <div class="spwidget-board-column-list-cntr ui-widget-content ui-corner-all" style="display: none"> <div class="ui-state-default"> <span> <span class="spwidget-board-column-total"></span> <span class="spwidget-board-column-total-label">Selected.</span> </span> <button type="button" name="check" title="Check-Uncheck All">Check</button> <button type="button" name="close" title="Close">Close</button> </div> <div class="spwidget-board-column-list"> </div> <div class="ui-state-default"> <button type="button" name="apply">Apply</button> </div> </div> </div> <div class="spwidget-board-headers"> <div class="spwidget-board-headers-cntr"> <div class="spwidget-board-state ui-widget-content ui-corner-top"> <span class="spwidget-board-header-title"></span> <span class="spwidget-state-item-stat-cntr"> <span class="spwidget-item-stat ui-widget-content ui-corner-all spwidget-state-item-total">0</span> </span> </div> <div style="clear:both"></div> </div> </div> <div style="clear:both"></div> <div class="spwidget-board-states"> <div class="spwidget-board-states-cntr"> <div class="spwidget-board-state ui-widget-content ui-corner-bottom"></div> <div style="clear:both"></div> </div> </div> <div style="clear:both"></div> </div> <div class="spwidget-item-template"> <div> <div>#{{ID}}: {{Title}}</div> <div class="ui-state-active ui-corner-all spwidget-board-item-actions"> <a class="spwidgets-board-action" href="javascript:" title="View Item" data-spwidgets_id="{{ID}}" data-spwidgets_board_action="view-item"><img src="/_layouts/images/icgen.gif" border="0"></a> <a class="spwidgets-board-action" href="javascript:" title="Edit Item" data-spwidgets_id="{{ID}}" data-spwidgets_board_action="edit-item"><img src="/_layouts/images/CMSEditSourceDoc.GIF" border="0"></a> </div> </div> </div>',u=void 0,v=function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n,o,p={};return p.maxColumns=20,p.defaults={list:"",field:"",CAMLQuery:"<Query></Query>",CAMLViewFields:"",fieldFilter:null,optionalLabel:"(none)",allowFieldBlanks:null,template:null,webURL:"",showColPicker:!1,colPickerLabel:"Columns",colPickerVisible:[],colPickerCloseLabel:"Close",colPickerApplyLabel:"Apply",colPickerCheckLabel:"Check-Uncheck All",colPickerTotalLabel:"Selected.",colPickerMaxColMsg:"Can not exceed 10 columns!",colPickerMinColMsg:"Mininum of 2 required!",onGetListItems:null,onPreUpdate:null,onBoardCreate:null,height:null},n=function(c,n){var q=Array.prototype.slice.call(arguments,1),r=c;return c.each(function(){var c=a(this),s="string"==typeof n,t=c.hasClass("hasSPShowBoard"),u=null,v="",w=null;return t&&!s?this:s&&t&&!c.hasClass("loadingSPShowBoard")?(v=n.toLowerCase(),w=c.data("SPShowBoardOptions"),"refresh"===v?w._getListItems().then(function(){w.showItemsOnBoard({refresh:!0})}):"redraw"===v?w.setBoardColumnHeight():"setvisible"===v?w.setUserDefinedVisibleCol(q[1]):"setheight"===v?(w.height=q[1],w.setBoardColumnHeight()):"getcolumns"===v&&(r=w.getBoardColumnList()),this):c.hasClass("loadingSPShowBoard")?this:(u=a.extend({},p.defaults,n,{ele:c,states:[],statesMap:{},tmpltHeader:"",tmpltState:"",statesCntr:"",headersCntr:"",listItems:[],initDone:!1,formUrls:null,isStateRequired:!1,maxColumnVisible:10,showNumberOfColumns:10,getBoardStates:o,_getListItems:function(){return a.Deferred(function(b){function d(d){a.isFunction(u.onGetListItems)&&u.onGetListItems.call(c,u.listItems,d),b.resolveWith(c,[u.listItems])}a.isFunction(u.CAMLQuery)?u.CAMLQuery.call(c,function(b){a.isArray(b)&&(u.listItems=b,d(u.CAMLQuery))},n):e({listName:u.list,async:!0,CAMLQuery:u.CAMLQuery,CAMLRowLimit:0,CAMLViewFields:u.CAMLViewFields,webURL:u.webURL}).then(function(a){u.listItems=a,d(a)}).fail(function(c,d,e){b.rejectWith(a,[c,d,e])})}).promise()},getBoardItemDataObject:function(b){var c,d,e,f=null;if(b)for(b=String(b),c=0,d=u.listItems.length;d>c;c++)e=u.listItems[c].ID,a.isFunction(e)&&(e=u.listItems[c].ID()),e=String(e),b===e&&(f=u.listItems[c],c=d+d);return f},showItemsOnBoard:function(b){function d(b,d){var e="",f=null,i="";return a.isFunction(u.template)?(e=u.template.call(c,b,d),e&&(e=String(e))):e=h(u.template,r),void 0!==d&&""!==e?d.html(e):""!==e&&(f=b.ID,a.isFunction(b.ID)&&(f=b.ID()),void 0===m[o]&&(m[o]=""),u.initDone&&g.refresh&&(i+=" spwidget-temp"),m[o]+='<div class="spwidget-board-state-item ui-state-default ui-corner-all'+i+'" data-id="'+f+'">'+e+"</div>"),e}var e,f,g=a.extend({},{rows:u.listItems,refresh:!1,doBoardInsert:!0},b),i=[],k=[],l=[],m={},n=null,o=null,p=null,q=null,r=null;if(!g.refresh)for(e=0,f=u.states.length;f>e;e++)u.states[e].headerTotalEle.html("0"),u.states[e].dataEle.empty();for(e=0,f=g.rows.length;f>e;e++)r=g.rows[e],o=r[u.field]||"",p=r.ID,a.isFunction(o)&&(o=r[u.field]()),a.isFunction(p)&&(p=p()),u.statesMap[o]&&(g.refresh===!1?(u.initDone&&i.push(r),d(r)):(n=u.statesCntr.find("div[data-id='"+p+"']"),n.length?(n.addClass("spwidget-temp"),n.closest("div.spwidget-board-state").data("boardstate")!==o&&(n.appendTo(u.statesMap[o].dataEle),l.push(r)),d(r,n)):(u.initDone&&i.push(r),d(r))));if(g.doBoardInsert){for(e in m)m.hasOwnProperty(e)&&""!==m[e]&&u.statesMap[e].dataEle.append(m[e]);j(c.find(".spwidget-board-state-item"))}return u.initDone&&g.refresh&&u.statesCntr.find("div.spwidget-board-state-item").not("div.spwidget-temp").each(function(){k.push(u.getBoardItemDataObject(a(this).data("id"))),a(this).remove()}).end().removeClass("spwidget-temp"),u.initDone&&(u.statesCntr.find("div.spwidget-board-state").sortable("refresh").end().disableSelection(),q=u.getEventObject(),i.length&&(q.itemsModified.length=0,q.itemsModified.push(i),c.trigger("spwidget:boarditemadd",[c,a.extend({},q)])),k.length&&(q.itemsModified.length=0,q.itemsModified.push(k),c.trigger("spwidget:boarditemremove",[c,a.extend({},q)])),q.itemsModified.length=0,q.itemsModified.push.apply(q.itemsModified,i),q.itemsModified.push.apply(q.itemsModified,k),q.itemsModified.push.apply(q.itemsModified,l),q.itemsModified.length&&c.trigger("spwidget:boardchange",[c,q])),u.updBoardHeaders(),u.setBoardColumnHeight(),m},updBoardHeaders:function(b){var c,d,e=a.extend({},{state:null},b);if(e.state);else for(c=0,d=u.states.length;d>c;c++)u.states[c].headerTotalEle.html(u.states[c].dataEle.children().length)},getEventObject:function(b){b||(b=u.statesCntr.find("div.spwidget-board-state-item:first")),b=a(b);var c,d,e={stateTotals:{},itemTotal:0,currentState:b.closest("div.spwidget-board-state").data("boardstate"),itemObj:u.getBoardItemDataObject(b.data("id"))||{},itemsModified:[]};for(c=0,d=u.states.length;d>c;c++)e.itemTotal+=e.stateTotals[u.states[c].name]=Number(u.states[c].headerTotalEle.text());return e},getListFormUrl:function(b){function c(){d({listName:u.list,webURL:u.webURL,cacheXML:!0,async:!1,completefunc:function(b){a(b.responseXML).find("Form").each(function(){var b=a(this);u.formUrls[String(b.attr("Type")).toLowerCase()]=u.webURL+"/"+b.attr("Url")})}})}return b=String(b).toLowerCase(),null===u.formUrls&&(u.formUrls={},c()),u.formUrls[b]||""},setUserDefinedVisibleCol:function(b){function c(b){var c=!1;return a.each(u.states,function(a,d){return d.title===b||d.name===b?(c=!0,!1):void 0}),c}var d=0,e=!1;if(b){if(!a.isArray(b)||!b.length){if(!a.isArray(b)&&"all"!==String(b).toLowerCase())return;e=!0,b=[]}b.length<2||(e||(d=0,a.each(b,function(a,b){return c(b)&&d++,2===d?!1:void 0})),d=0,a.each(u.states,function(c,e){return a.inArray(e.title,b)>-1||a.inArray(e.name,b)>-1?(d++,e.isVisible===!1&&(e.isVisible=!0,e.dataEle.css("display",""),e.headerEle.css("display",""))):(e.isVisible=!1,e.dataEle.css("display","none"),e.headerEle.css("display","none")),d>=u.maxColumnVisible?!1:void 0}),u.setBoardColumnClass(d),u.setBoardColumnHeight(),u.triggerBoardColumnChangeEvent())}},setBoardColumnClass:function(b){var c=u.headersCntr.add(u.statesCntr);return b=parseInt(b),(!b||2>b)&&(b=0,a.each(u.states,function(a,c){c.isVisible&&b++})),u.showNumberOfColumns===b?u:(c.addClass("spwidget-states-"+b),u.showNumberOfColumns&&c.removeClass("spwidget-states-"+u.showNumberOfColumns),u.showNumberOfColumns=b,u)},triggerBoardColumnChangeEvent:function(){var b=[];u.initDone&&(a.each(u.statesMap,function(a,c){c.isVisible&&b.push(c.title)}),u.ele.trigger("spwidget:boardColumnChange",[u.ele,b]))},setupColumnPicker:function(){var b=c.find(".spwidget-board-column-list-cntr"),d=b.find("div.spwidget-board-column-list"),e=b.children("div.ui-state-default:last"),f={$totalCntr:b.find("span.spwidget-board-column-total")};f.setTotalSelected=function(){var a=f.getSelected().length;return f.$totalCntr.html(a),a},f.getSelected=function(){return d.find("a.ui-state-highlight")},f.showMessage=function(b){a('<div class="spwidget-board-msg ui-state-error ui-corner-all">'+b+"</div>").appendTo(e).fadeOut(8e3,function(){a(this).remove()})},f.setSelected=function(){var b=d.find("a");a.each(u.states,function(a,c){var d=b.filter("[data-board_col_index='"+a+"']");c.isVisible?f.selectColumn(d,!1):f.selectColumn(d,!0)}),f.setTotalSelected()},f.selectColumn=function(b,c){return a(b).each(function(){var b=a(this),d=b.find(".ui-icon");b.hasClass("ui-state-highlight")||c?c!==!1&&(d.removeClass("ui-icon-check"),b.removeClass("ui-state-highlight")):(d.addClass("ui-icon-check"),b.addClass("ui-state-highlight"))}),b},f.setVisibleColumns=function(b){b||(b=f.getSelected());var c=b.length;a.each(u.states,function(a,c){b.filter("[data-board_col_index='"+a+"']").length?c.isVisible===!1&&(c.isVisible=!0,c.dataEle.css("display",""),c.headerEle.css("display","")):(c.isVisible=!1,c.dataEle.css("display","none"),c.headerEle.css("display","none"))}),u.setBoardColumnClass(c),u.setBoardColumnHeight()},f.setUserDefinedVisibleCol=function(b){var c=0,e="";if(!a.isArray(b)||!b.length){if(!a.isArray(b)&&"all"!==String(b).toLowerCase())return;b=[],a.each(u.states,function(a,c){b.push(c.title)})}a.each(b,function(b,d){return a.each(u.states,function(a,b){return b.title===d?(c++,c>1&&(e+=","),e+="a[data-board_col_name='"+b.name+"']",!1):void 0}),c>=u.maxColumnVisible?!1:void 0}),c>=2&&(f.setVisibleColumns(d.find(e)),f.triggerEvent())},f.triggerEvent=u.triggerBoardColumnChangeEvent,b.find("button[name='apply']").button({label:u.colPickerApplyLabel,icons:{secondary:"ui-icon-circle-check"}}).on("click",function(){var a=f.getSelected(),c=a.length;return c>u.maxColumnVisible?void f.showMessage(u.colPickerMaxColMsg):2>c?void f.showMessage(u.colPickerMinColMsg):(b.hide(),f.setVisibleColumns(a),void f.triggerEvent())}),b.find("button[name='check']").attr("title",u.colPickerCheckLabel).button({text:!1,icons:{primary:"ui-icon-radio-off"}}).on("click",function(){var a=f.getSelected();a.length?f.selectColumn(a,!0):f.selectColumn(d.find("a")),f.setTotalSelected()}),b.find("button[name='close']").attr("title",u.colPickerCloseLabel).button({text:!1,icons:{primary:"ui-icon-circle-close"}}).on("click",function(){b.hide()}),c.find("div.spwidget-board-settings").css("display","").find("div.spwidget-board-settings-columns").each(function(){var c=a(this);return c.button({label:u.colPickerLabel,icons:{secondary:"ui-icon-triangle-1-s"}}).on("click.SPWidgets",function(){b.is(":visible")?b.hide():(f.setSelected(),b.show().position({my:"left top",at:"left bottom",of:c}))}),!1}),d.each(function(){var b=a(this),c="";return a.each(u.states,function(a,b){c+='<a href="javascript:" data-board_col_index="'+a+'" data-board_col_name="'+b.name+'"><span class="ui-icon ui-icon-minus"></span><span>'+b.title+"</span></a>"}),b.html(c),!1}).on("click","a",function(){f.selectColumn(this),f.setTotalSelected()}),b.find("span.spwidget-board-column-total-label").html(u.colPickerTotalLabel)},setBoardColumnHeight:function(){return u.headersCntr.is(":visible")&&i(u.headersCntr.find("div.spwidget-board-state:visible"),0,"min-height"),u.height?void u.statesCntr.find("div.spwidget-board-state:visible").css({height:u.height,"min-height":""}):void(u.statesCntr.is(":visible")&&i(u.statesCntr.find("div.spwidget-board-state:visible").css("height",""),20,"min-height"))},getBoardColumnList:function(){var a,b,c=[];for(a=0,b=u.states.length;b>a;a++)c.push({name:u.states[a].name,title:u.states[a].title,isVisible:u.states[a].isVisible});return c}}),u.webURL||(u.webURL=b()),u.list&&u.field?(c.addClass("loadingSPShowBoard").data("SPShowBoardOptions",u),u.getBoardStates().then(function(){""===u.CAMLViewFields?u.CAMLViewFields='<ViewFields><FieldRef Name="ID" /><FieldRef Name="Title" /><FieldRef Name="'+u.field+'" /></ViewFields>':u.CAMLViewFields.indexOf(u.field)<0&&(u.CAMLViewFields=u.CAMLViewFields.replace(/<\/ViewFields\>/i,'<FieldRef Name="'+u.field+'" /></ViewFields>')),c.html(a(m).filter("div.spwidget-board")),u.tmpltHeader=a("<div/>").append(c.find("div.spwidget-board-headers-cntr div.spwidget-board-state").clone()).html(),u.tmpltState=a("<div/>").append(c.find("div.spwidget-board-states-cntr div.spwidget-board-state")).html(),u.states.length<=u.maxColumnVisible&&(u.showNumberOfColumns=u.states.length),u.statesCntr=c.find("div.spwidget-board-states-cntr").addClass("spwidget-states-"+u.showNumberOfColumns).empty(),u.headersCntr=c.find("div.spwidget-board-headers-cntr").addClass("spwidget-states-"+u.showNumberOfColumns).empty(),a.each(u.states,function(b,c){c.headerEle=a(u.tmpltHeader).appendTo(u.headersCntr).attr("data-boardstate",c.name).attr("data-boardindex",b).find(".spwidget-board-header-title").html(c.title).end(),c.dataEle=a(u.tmpltState).appendTo(u.statesCntr).attr("data-boardindex",b).attr("data-boardstate",c.name),c.headerTotalEle=c.headerEle.find("span.spwidget-state-item-total"),c.isVisible=!0,b>u.maxColumnVisible-1&&(c.headerEle.css("display","none"),c.dataEle.css("display","none"),c.isVisible=!1)}),a(u.headersCntr,u.statesCntr).append('<div style="clear:both;"></div>'),u.showColPicker===!0&&u.setupColumnPicker(),a.isArray(u.colPickerVisible)&&u.colPickerVisible.length&&u.setUserDefinedVisibleCol(u.colPickerVisible),c.on("sortreceive sortremove",function(b,c){u.updBoardHeaders(),a(c.item).removeClass("ui-state-hover")}).on("sortreceive",function(b,d){var e=u.getEventObject(d.item),h=a.Deferred(),i="";return i=a.isFunction(e.itemObj.ID)?e.itemObj.ID():e.itemObj.ID,e.updates=[],e.updatePromise=h.promise(),e.updates.push([u.field,e.currentState]),a.isFunction(u.onPreUpdate)&&u.onPreUpdate.call(d.item,b,d.item,e)===!0?this:e.updates.length?void f({listName:u.list,async:!0,ID:i,valuepairs:e.updates,webURL:u.webURL,completefunc:function(f,i){if("error"===i)return void h.rejectWith(c,["Communications Error!",f,i]);var j=a(f.responseXML),m=null;return k(j)?void h.rejectWith(c,[l(j),f,i]):(m=g({xDoc:f.responseXML,nodeName:"z:row"}),a(b.target).trigger("spwidget:boardchange",[d.item,e]),void h.resolveWith(b.target,[m[0],e.itemObj,f]))}}):this}).on("click","a.spwidgets-board-action",function(b){var c=a(b.currentTarget),d=String(c.data("spwidgets_board_action")).toLowerCase(),e="",f=encodeURIComponent(window.location.href);switch(d){case"edit-item":e=u.getListFormUrl("EditForm");break;case"view-item":e=u.getListFormUrl("DisplayForm")}return window.location.href=e+"?ID="+c.data("spwidgets_id")+"&Source="+f,this}),null===u.template&&(u.template=a(m).filter("div.spwidget-item-template")),u._getListItems().then(function(){u.showItemsOnBoard(),u.statesCntr.find("div.spwidget-board-state").each(function(){var b=a(this);b.sortable({connectWith:b.siblings(),containment:c,cursor:"move",tolerance:"pointer",opacity:".80",placeholder:"ui-state-highlight spwidget-board-placeholder",forcePlaceholderSize:!0,remove:function(){u.setBoardColumnHeight()}})}),u.statesCntr.disableSelection(),u.initDone=!0,u.setBoardColumnHeight(),c.addClass("hasSPShowBoard").removeClass("loadingSPShowBoard"),a.isFunction(u.onBoardCreate)&&u.onBoardCreate.call(c,u.getEventObject()),a(c).trigger("spwidget:boardcreate",[c,u.getEventObject()])
})}).fail(function(a){c.append('<div class="ui-state-error"><p>'+a+"</p></div>")}),this):(c.html("<div>SPWidgets:Board [ERROR] Missing required input parameters!</div>"),this))}),r},o=function(){var b=this;return a.Deferred(function(d){var f=function(c,e){d.rejectWith(a,[e||"Field ("+b.field+") not found in list definition!",c,"error"])};c({listName:b.list,cacheXML:!0,webURL:b.webURL}).then(function(c){var g=c.getColumn(b.field);if(!g)return void f(null);switch(b._origField=b.field,b.field=g.Name,"TRUE"===g.Required&&(b.isStateRequired=!0),"boolean"==typeof b.allowFieldBlanks&&(b.isStateRequired=!b.allowFieldBlanks),g.Type.toLowerCase()){case"choice":b.isStateRequired||(b.states.push({type:"choice",title:b.optionalLabel,name:b.optionalLabel}),b.statesMap[""]=b.states[b.states.length-1]),b.fieldFilter&&(b.fieldFilter=b.fieldFilter.split(/\,/)),g.getColumnValues().some(function(c,d){if(!b.fieldFilter||a.grep(b.fieldFilter,function(a){return a===c}).length){if(d>=p.maxColumns){try{console.log("SPWIDGETS:BOARD:Warning: Can only build a max of "+p.maxColumns+" columns!")}catch(e){}return!0}b.states.push({type:"choice",title:c,name:c}),b.statesMap[c]=b.states[b.states.length-1]}}),d.resolveWith(a,[b.states]);break;case"lookup":b.fieldFilter||(b.fieldFilter="<Query></Query>"),e({listName:g.List,async:!0,cacheXML:!0,CAMLQuery:b.fieldFilter,webURL:b.webURL,CAMLRowLimit:p.maxColumns,CAMLViewFields:'<ViewFields><FieldRef Name="'+g.ShowField+'" /></ViewFields>'}).then(function(a){return"error"===status?void f(null,"Communications Error!"):(b.isStateRequired||(b.states.push({type:"lookup",title:b.optionalLabel,name:""}),b.statesMap[""]=b.states[b.states.length-1]),a.some(function(a,c){if(c>=p.maxColumns){try{console.log("SPWIDGETS:BOARD:Warning: Can only build a max of "+p.maxColumns+" columns!")}catch(d){}return!0}var e=a.ID,f=a[g.ShowField],h=e+";#"+f;b.states.push({type:"lookup",title:f,name:h}),b.statesMap[h]=b.states[b.states.length-1]}),void d.resolveWith(b,[b.states]))}).fail(function(a){f(a,"Unable to get rows from Lookup column list")});break;default:f(null,"Field ("+b.field+") Type ("+g.Type+") is not supported!")}}).fail(function(a){f(a)})}).promise()},n.defaults=p.defaults,n}(Z,a,m,n,k,p,f,q,r,s,h,o,t),w='<div class="spwidget-date-cntr"> <div class="spwidget-date-selected-cntr" style="display:none"></div> <div class="spwidget-date-input-cntr"> <input class="spwidget-date-datepicker" name="SPDateFieldInput"> </div> </div> <div class="spwidget-datetime-selector ui-widget-content ui-corner-all"> <div class="spwidget-selectors"> <div class="spwidget-date-selector"></div> <div class="spwidget-time-selector ui-widget-content ui-corner-all"> <div class="spwidget-time-selector-cntr"> <div class="ui-widget-header ui-helper-clearfix ui-corner-all"> Time </div> <div class="spwidget-time-hour"> <label>Hour</label> <select name="spwidget_hour" class="spwidget-hour"> <option value="1"> 1</option> <option value="2"> 2</option> <option value="3"> 3</option> <option value="4"> 4</option> <option value="5"> 5</option> <option value="6"> 6</option> <option value="7"> 7</option> <option value="8"> 8</option> <option value="9"> 9</option> <option value="10">10</option> <option value="11">11</option> <option value="12">12</option> </select> </div> <div class="spwidget-time-min"> <label>Minutes</label> <select name="spwidget_min" class="spwidget-min"> <option value="00">00</option> <option value="05">05</option> <option value="10">10</option> <option value="15">15</option> <option value="20">20</option> <option value="25">25</option> <option value="30">30</option> <option value="35">35</option> <option value="40">40</option> <option value="45">45</option> <option value="50">50</option> <option value="55">55</option> </select> </div> <div class="spwidget-time-ampm"> <label>AM|PM</label> <select name="spwidget_ampm" class="spwidget-ampm"> <option value="AM">AM</option> <option value="PM">PM</option> </select> </div> </div> </div> </div> <div class="spwidget-btn-set"> <div class="spwidget-btn"> Set </div> </div> </div>',x=function(){var a=function(a,b){function c(a){return 10>a?"0"+a:a}b=String(b||"local").toLowerCase(),a=a||new Date;var d="";return d="utc"===b?a.getUTCFullYear()+"-"+c(a.getUTCMonth()+1)+"-"+c(a.getUTCDate())+"T"+c(a.getUTCHours())+":"+c(a.getUTCMinutes())+":"+c(a.getUTCSeconds())+"Z":a.getFullYear()+"-"+c(a.getMonth()+1)+"-"+c(a.getDate())+"T"+c(a.getHours())+":"+c(a.getMinutes())+":"+c(a.getSeconds())};return a}(),y=function(){var a=function(a){var b,c,d,e,f,g,h=null;if(!a)return h;if(h=Date.parse(10===a.length?a+"T00:00":a))return new Date(h);if(f=[1,4,5,6,7,10,11],b=/^(\d{4}|[+\-]\d{6})(?:-(\d{2})(?:-(\d{2}))?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3}))?)?(?:(Z)|([+\-])(\d{2})(?::(\d{2}))?)?)?$/,c=a.match(b),!c)return h;for(d=0,e=f.length;e>d;d++)c[f[d]]=~~c[f[d]];return--c[2],"Z"===c[8]?(void 0!==c[9]&&(g=60*c[10]+c[11],"+"===c[9]&&(g=-g),c[5]+=g),h=new Date(Date.UTC(c[1],c[2],c[3],c[4],c[5],c[6],c[7]))):h=new Date(c[1],c[2],c[3],c[4],c[5],c[6],c[7]),h};return a}(),z=void 0,A=function(a,b,c,d,e,f){var g,h={};return h.isInitDone=!1,h.evNamespace=".spwidgets.spdatefield",h.defaults={allowMultiples:!1,delimeter:";",remainOpen:!0,datepicker:{dateFormat:"mm/dd/yy",buttonImage:"/_layouts/images/CALENDAR.GIF",showOn:"both",buttonImageOnly:!0},dateTemplate:'{{date}} <span class="spwidgets-item-remove">[x]</span>',showTimepicker:!1,timeFormat:" {{hour}}:{{minutes}} {{ampm}}",timeUTC:!0,labelHour:"Hour",labelMinutes:"Minutes",labelAMPM:"AM|PM",labelTime:"Time",labelSet:"Set",onSelect:null},g=function(g,i){var j=Array.prototype.slice.call(arguments,1),k=g;return h.isInitDone||(h.isInitDone=!0,a("body").on("click"+h.evNamespace,h.onPageClick)),"string"==typeof i?function(){var b=String(j[0]).toLowerCase(),c=k;return a(k).each(function(d,e){if(a(k).hasClass("hasSPDateField")){var f=a(e),g=f.data("SPDateFieldInstance");if(g&&f.length>0)switch(b){case"getdate":c=g.getDate();break;case"setdate":j[1]&&g.setDate({date:j[1],format:j[2]||g.opt.datepicker.dateFormat});break;case"removedate":j[1]&&g.removeDate({date:j[1],format:j[2]||g.opt.datepicker.dateFormat});break;case"reset":g.reset();break;case"destroy":g.destroy()}}}),c}():g.each(function(){var g={$ele:a(this).addClass("hasSPDateField"),isInline:!1,inlineCntr:null};if(!g.$ele.is("input[type='text']")){if(g.$ele.is(":input"))return this;g.isInline=!0,g.inlineCntr=a(this),g.$ele=a('<input name="spdatefieldinline" value="" type="text" style="display:none" />')}return g.opt=a.extend(!0,{},h.defaults,i),g.$ui=a(b).filter("div.spwidget-date-cntr").clone(),g.isInline?(g.$ui.appendTo(g.inlineCntr).addClass("spwidget-inline").css("display","none"),g.$ele.appendTo(g.$ui)):g.$ui.insertAfter(g.$ele).css("display","none"),g.eleOrigVal=g.$ele.val(),g.$ele.val(""),g.$input=g.$ui.find("input[name='SPDateFieldInput']").val(g.$ele.val()),g.$inputCntr=g.$input.closest(".spwidget-date-input-cntr"),g.$dtCntr=g.$ui.find("div.spwidget-date-selected-cntr"),g.getDate=function(){var a={input:g.$ele.val(),dates:[]};return a.input&&(g.opt.allowMultiples?a.dates=a.input.split(g.opt.delimeter):a.dates.push(a.input)),a},g.reset=function(){return g.$input.val("").datepicker("hide"),g.$ele.val("").change(),g.$dtCntr.empty(),g},g.setDate=function(b){var f,h=a.extend({},{date:"",time:"",format:g.opt.datepicker.dateFormat,setDatepicker:!0,triggerEvent:!0},b),i=g.$ele.val(),j="";return h.date?(a.isArray(h.date)||(h.date=[h.date]),a.each(h.date,function(b,k){var l=k,m="",n="";if(!(l instanceof Date))if(l=String(l),l.indexOf("T")>-1)l=e(l);else try{l=a.datepicker.parseDate(h.format,k)}catch(o){return g}f=l,m=a.datepicker.formatDate("yy-mm-dd",l),n=a.datepicker.formatDate(g.opt.datepicker.dateFormat,l),g.opt.showTimepicker&&(m=d(l,g.opt._timeFmt),n+=g.$timepicker.formatTime(l)),g.opt.allowMultiples?i.indexOf(m)<0&&(i&&(i+=g.opt.delimeter),i+=m,j+='<span class="spwidgets-item" data-spwidget_dt1="'+m+'" data-spwidget_dt2="'+n+'">'+c({tmplt:g.opt.dateTemplate,data:{date:n}})+" </span>"):(i=m,j=n)}),g.opt.allowMultiples?g.$dtCntr.append(j):h.setDatepicker&&(g.$input.val(j),g.isInline&&!g.opt.showTimepicker?g.$inputCntr.datepicker("setDate",f):g.isInline&&g.$timepicker.updateDateTimeWidgets(f)),g.$ele.val(i),h.triggerEvent&&(g.isInline||g.$ele.change(),a.isFunction(g.opt.onSelect)&&g.opt.onSelect.call(g.isInline?g.inlineCntr:g.$ele)),g):g},g.removeDate=function(b){var c=a.extend({},{date:"",format:g.opt.datepicker.dateFormat},b),e=g.getDate();return c.date?(a.isArray(c.date)||(c.date=[c.date]),a.each(c.date,function(b,f){var h=f,i="",j="";if(!(h instanceof Date))try{h=a.datepicker.parseDate(c.format,f)}catch(k){return g}i=g.opt.showTimepicker?d(h,g.opt._timeFmt):a.datepicker.formatDate("yy-mm-dd",h),j=new RegExp("("+g.opt.delimeter+")?"+i,"g"),e.input=e.input.replace(j,""),g.opt.allowMultiples&&g.$dtCntr.find("span[data-spwidget_dt1='"+i+"']").remove()}),e.input=e.input.replace(new RegExp("^"+g.opt.delimeter),"").replace(new RegExp(g.opt.delimeter+"$"),""),g.$ele.val(e.input).change(),g):g},g.destroy=function(){g.$ele.removeData("SPDateFieldInstance"),g.$ele.removeClass("hasSPDateField").css("display",""),g.$ui.css("display","none"),g.$input.datepicker("hide"),g.$input.datepicker("destroy"),g.$timepicker&&(g.$timepicker.$timePicker.off(".spdatefield"),g.$input.off(".spdatefield")),g.isInline&&g.inlineCntr.removeClass("hasSPDateField").removeData("SPDateFieldInstance"),g.$ui.remove()},g.createDatePicker=function(){var d={};return g.opt.showTimepicker?(d.$selectorCntr=a(b).filter("div.spwidget-datetime-selector").clone().appendTo(g.$inputCntr).css("display","none"),d.$datePicker=d.$selectorCntr.find("div.spwidget-date-selector"),d.$timePicker=d.$selectorCntr.find("div.spwidget-time-selector"),d.$setButton=d.$selectorCntr.find("div.spwidget-btn-set"),d.$hourSelect=d.$timePicker.find("select.spwidget-hour"),d.$minSelect=d.$timePicker.find("select.spwidget-min"),d.$ampmSelect=d.$timePicker.find("select.spwidget-ampm"),d.heightDone=!1,d.firstShowDone=!1,d.getTime=function(){var a={hour:d.$hourSelect.val(),minutes:d.$minSelect.val(),ampm:d.$ampmSelect.val()};return a.hour24=a.hour,"PM"===a.ampm&&"12"!==a.hour?a.hour24=String(parseInt(a.hour)+12):"AM"===a.ampm&&"12"===a.hour&&(a.hour24="0"),a},d.formatTime=function(a){var b=a,e="";return a instanceof Date?(b={hour:a.getHours(),hour24:String(a.getHours()),minutes:String(a.getMinutes()),ampm:"AM"},b.hour>12?(b.hour=String(b.hour-12),b.ampm="PM"):12===b.hour&&(b.ampm="PM"),b.hour=String(b.hour),"0"===b.hour&&(b.hour="12"),String(b.minutes).length<2&&(b.minutes="0"+b.minutes)):a||(b=d.getTime()),e=c(g.opt.timeFormat,b)},d.setDateTime=function(a){var b=d.getTime();a instanceof Date||(a=d.$datePicker.datepicker("getDate"),null===a&&(a=new Date)),a.setHours(b.hour24),a.setMinutes(b.minutes),g.setDate({date:a,format:g.opt.datepicker.dateFormat,setDatepicker:!0}),d.execUsersCallback(g.$input.val())},d.updateDateTimeWidgets=function(a){var b,c=a;for(c instanceof Date||(c=new Date),b=c.getHours(),0===b?b="12":b>12&&(b-=12),d.$hourSelect.val(b),b=c.getMinutes();b%5;)--b;10>b&&(b="0"+b),d.$minSelect.val(b),d.$ampmSelect.val(c.getHours()>11?"PM":"AM"),d.$datePicker.datepicker("setDate",c)},d.showPicker=function(){d.$selectorCntr.show(function(){var a;d.heightDone||(d.heightDone=!0,f(d.$datePicker.find("div.ui-datepicker-inline").add(d.$timePicker))),d.firstShowDone||(d.firstShowDone=!0,a=g.getDate(),a=a.dates.length?e(a.dates[a.dates.length-1]):new Date,d.updateDateTimeWidgets(a))}).position({my:"left top",at:"left bottom",of:g.$input})},d.execUsersCallback=function(b,c){a.isFunction(g.opt.datepicker._onSelect)&&g.opt.datepicker._onSelect.call(d.$datePicker,b,c)},g.opt.datepicker.altFormat="",g.opt.datepicker.altField="",g.opt.datepicker.buttonImage&&!g.isInline&&a('<img class="ui-datepicker-trigger" src="'+g.opt.datepicker.buttonImage+'" alt="..." title="...">').appendTo(g.$inputCntr).on("click"+h.evNamespace,function(){d.showPicker()}),(g.opt.allowMultiples||g.isInline)&&(d.$selectorCntr.addClass("spwidget-date-multiples-cntr"),d.$setButton.find("div.spwidget-btn").button({label:g.opt.labelSet}).on("click"+h.evNamespace,function(){return d.setDateTime(),this})),d.$timePicker.find("div.ui-widget-header").html(g.opt.labelTime).end().find("div.spwidget-time-hour > label").html(g.opt.labelHour).end().find("div.spwidget-time-min > label").html(g.opt.labelMinutes).end().find("div.spwidget-time-ampm > label").html(g.opt.labelAMPM).end(),a.isFunction(g.opt.datepicker.onSelect)&&(g.opt.datepicker._onSelect=g.opt.datepicker.onSelect),g.opt.datepicker.numberOfMonths=1,g.opt.datepicker.onSelect=function(a,b){if(g.opt.allowMultiples||g.isInline)return this;var c=new Date(b.currentYear,b.currentMonth,b.currentDay);d.setDateTime(c)},d.$datePicker.datepicker(g.opt.datepicker),d.$timePicker.on("change"+h.evNamespace+" keyup"+h.evNamespace,"select",function(a){return a.stopPropagation(),a.preventDefault(),g.opt.allowMultiples||g.isInline?this:(d.setDateTime(),this)}),g.isInline&&(g.$input.css("display","none"),d.$selectorCntr.addClass("spwidget-inline").css("display","")),g.isInline||g.$input.on("focus"+h.evNamespace,function(){d.showPicker()})):(g.opt.allowMultiples&&g.opt.remainOpen&&(g.opt.datepicker.showAnim=""),a.isFunction(g.opt.datepicker.onSelect)&&(g.opt.datepicker._onSelect=g.opt.datepicker.onSelect),g.opt.datepicker.onSelect=function(b,c){g.setDate({date:b,format:c.settings.dateFormat,setDatepicker:!1}),a.isFunction(g.opt.datepicker._onSelect)&&g.opt.datepicker._onSelect.call(this,b,c),g.opt.allowMultiples&&g.$input.val(""),g.opt.allowMultiples&&g.opt.remainOpen&&!g.isInline&&setTimeout(function(){g.$input.datepicker("show")},5)},g.isInline?(g.$inputCntr.datepicker(g.opt.datepicker),g.$input.css("display","none")):g.$input.datepicker(g.opt.datepicker)),d},g.opt._timeFmt=g.opt.timeUTC?"utc":"local",g.opt.datepicker.altFormat="yy-mm-dd",g.opt.datepicker.altField=g.$ele,g.opt.allowMultiples&&(g.opt.datepicker.altFormat="",g.opt.datepicker.altField="",g.$dtCntr.css("display","").on("click",".spwidgets-item-remove",function(b){var c=a(b.target).closest(".spwidgets-item"),d=c.data("spwidget_dt1");g.opt.allowMultiples&&(d=e(d)),g.removeDate({date:d,format:"yy-mm-dd"})})),g.$ele.css("display","none").data("SPDateFieldInstance",g),g.isInline&&g.inlineCntr.data("SPDateFieldInstance",g),g.$timepicker=g.createDatePicker(),g.eleOrigVal&&g.setDate({date:g.eleOrigVal.split(g.opt.delimeter),format:"yy-mm-dd",triggerEvent:!1}),g.$input.on("change",function(a){a.stopPropagation(),g.$ele.change()}),g.$ui.css("display",""),this})},h.onPageClick=function(b){var c=a(b.target),d=a("div.spwidget-datetime-selector:visible:not('.spwidget-inline')"),e=null;return a.contains(document.documentElement,c[0])?(d.length&&(e=c.closest("div.spwidget-datetime-selector"),!e.length&&c.is("input.spwidget-date-datepicker,.ui-datepicker-trigger")&&(e=c.parent().find("div.spwidget-datetime-selector")),d.not(e).hide()),this):this},g.defaults=h.defaults,g}(Z,w,q,x,y,r),B='<div> <div class="spwidgets-lookup-cntr"> <div class="spwidget-lookup"> <div class="spwidgets-lookup-selected" style="display:none"> </div> <div class="spwidgets-lookup-input"> <label>Add</label> <input type="text" name="spwidgetLookupInput"> <span class="spwidget-lookup-selector-showhide" title="Browse">Browse</span> <div class="spwidget-lookup-selector-cntr ui-widget-content"> <div class="ui-state-default"> <button type="button" name="close" title="Close">Close</button> </div> <div class="spwidget-lookup-selector-item-cntr"></div> </div> </div> </div> </div> </div>',C=function(a){var b=function c(b){var d,e=a.extend({},{type:"AND",values:[],onEachValue:null},b),f="<And>",g="</And>",h="",i=0,j=0,k=!1,l="",m=0;for(e.type=String(e.type).toUpperCase(),a.isArray(e.values)||(e.values=[e.values]),"AND"!==e.type&&(f="<Or>",g="</Or>"),i=e.values.length,j=i-1,k=a.isFunction(e.onEachValue),d=0;i>d;d++)if(l="",l+=k?String(e.onEachValue(e.values[d])).toString():String(e.values[d]).toString(),l&&(h+=l,m++,j-d>1)){l=c(a.extend({},e,{values:e.values.slice(d+1,i-d)})),l&&(m++,h+=l);break}return m>1&&(h=f+h+g),h};return b}(Z),D=function(){var a=function(a){var b,c,d,e=[],f=String(a).split(";#"),g=f.length;if(void 0===a)return e;for(b=0;g>b;b++)c=f[b],b++,d=f[b],(c||d)&&e.push({id:c,title:d});return e};return a}(),E=function(){var a={escape:function(a){return"string"!=typeof a?"":a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&apos;").replace(/"/g,"&quot;")},unescape:function(a){return"string"!=typeof a?"":a.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/&apos;/g,"'").replace(/&quot;/g,'"')}};return a}(),F=void 0,G=function(a,b,c,d,e,f,g,h){var i,j={_isLookupbodyEventDone:!1};return j.defaults={list:"",allowMultiples:!0,inputLabel:"",inputPlaceholder:"Type and Pick",readOnly:!1,exactMatch:!0,uiContainer:null,selectFields:["Title"],filter:"",filterFields:["Title"],filterOrderBy:"",template:'<div>{{Title}} <span class="spwidgets-item-remove">[x]</span></div>',listTemplate:"{{Title}}",listHeight:0,onItemAdd:null,onItemRemove:null,onReady:null,msgNoItems:"",maxResults:50,minLength:2,hideInput:!0,padDelimeter:!1,showSelector:!1},i=function(f,h){var i=Array.prototype.slice.call(arguments,1);return f.each(function(){var f,k=a(this);if(!k.is("input")&&!k.is("textarea")||k.hasClass("hasLookupSPField")){if("string"==typeof h&&k.is("input")&&(f=k.data("SPWidgetLookupFieldUI").data("SPWidgetLookupFieldOpt"),"method"===h.toLowerCase())){var l=String(i[1]||"").toLowerCase(),m=i[2];"clear"===l?(a.isArray(m)||(m=m?[m]:[]),m.length?!function(){var b=a();a.each(m,function(a,c){b=b.add(f._selectedItemsCntr.find("div.spwidgets-item-id-"+c))}),j.removeItem(f,b)}():j.removeItem(f,f._selectedItemsCntr.find("div.spwidgets-item"))):"add"===l&&j.addItem(f,m)}return this}f=a.extend({},j.defaults,h,{_ele:k.css("display","none").addClass("hasLookupSPField")}),f.showSelectedItems=function(b,c){var e=f._selectedItemsCntr.css("display",""),g=[],h=!1;e.find("div.spwidgets-item").length&&f.allowMultiples!==!1||e.empty(),a.isArray(b)?g=b:g.push(b),a.each(g,function(b,g){if(!e.find("div.spwidgets-item-id-"+g.ID).length){var i=a('<div class="spwidgets-item spwidgets-item-id-'+g.ID+'" data-spid="'+g.ID+'" style="display:none">'+d(f.template,g)+"</div>").appendTo(e).find(".spwidgets-item-remove").on("click.SPWidgets",function(){j.removeItem(f,this)}).end();a.isFunction(f.onItemAdd)&&c!==!0&&f.onItemAdd.call(f._ele,i,g,f._cntr),e.find("div.spwidgets-item-id-"+g.ID).length>0&&(h=!0,i.fadeIn("slow").promise().then(function(){a(this).css("display","")}),c!==!0&&f.storeItemIDs(g.ID,f.allowMultiples),f.allowMultiples===!1&&f.hideInput===!0&&f._lookupInputEleCntr.css("display","none"))}}),f.readOnly&&f._cntr.find(".spwidgets-item-remove").remove(),h&&f._ele.trigger("change")},f.storeItemIDs=function(b,c){var d=a.trim(f._ele.val()),e=!1;a.isArray(b)||(b=[b]),c!==!0&&(d=""),a.each(b,function(a,b){b&&(d.length<1&&f.padDelimeter===!0&&!e&&(d+=";#",e=!0),d.length>0&&(d+=";#"),d+=b+";#")}),f._ele.val(d)},f.showCurrentInputSelection=function(b){return a.Deferred(function(d){var h=a.extend({},{async:!0},b),i=g(f._ele.val());return i.length?void c({operation:"GetListItems",async:h.async,listName:f.list,CAMLQuery:"<Query><Where>"+e({type:"OR",values:i,onEachValue:function(a){var b="";return a.id&&(b="<Eq><FieldRef Name='ID'/><Value Type='Counter'>"+a.id+"</Value></Eq>"),b}})+"</Where></Query>",CAMLViewFields:"<ViewFields>"+f._selectFields+"</ViewFields>",CAMLRowLimit:0,completefunc:function(a,b,c){f.addToAutocompleteCache(c),f.showSelectedItems(c,!0),d.resolveWith(f,[a,b])}}):void d.resolveWith(f,[null,null])}).promise()},f.getItemObjectFromCache=function(b){var c=null;return a.each(f._autocompleteCache,function(d,e){return a.each(e,function(a,d){return d.ID===b?(c=d,!1):void 0}),null!==c?!1:void 0}),c},f.addToAutocompleteCache=function(b){a.isArray(b)||(b=[b]),a.each(b,function(a,b){f._autocompleteCache[b.ID]||(f._autocompleteCache[b.ID]=[]),f._autocompleteCache[b.ID].push(b)})},f._cntr=a(b).find(".spwidgets-lookup-cntr").clone(1),null===f.uiContainer?f._cntr.insertAfter(f._ele):f._cntr.appendTo(a(f.uiContainer)),f._selectedItemsCntr=f._cntr.find("div.spwidgets-lookup-selected"),f._lookupInputEleCntr=f._cntr.find("div.spwidgets-lookup-input"),f._lookupInputEle=f._lookupInputEleCntr.find("input[name='spwidgetLookupInput']"),f._ignoreKeywordsRegEx=/^(of|and|a|an|to|by|the|or)$/i,f._cntr.data("SPWidgetLookupFieldOpt",f),f._ele.data("SPWidgetLookupFieldUI",f._cntr),f.showSelector?(f._selectorCntr=f._cntr.find("div.spwidget-lookup-selector-cntr"),f._queryInitDone=!1,f._cntr.find(".spwidget-lookup-selector-showhide").on("click",function(){f._selectorCntr.is(":visible")?f._selectorCntr.css("display","none"):(f._selectorCntr.css("display","block").position({my:"left top",at:"left bottom",of:f._lookupInputEle}),f._queryInitDone||(f._queryInitDone=!0,j.doSelectorDataInit(f)))}),f._selectorCntr.find("button[name='close']").button({text:!1,icons:{primary:"ui-icon-circle-close"}}).click(function(){f._selectorCntr.css("display","none")}),f._lookupInputEle.on("focus",function(){f._selectorCntr.is(":visible")&&f._selectorCntr.css("display","none")})):f._cntr.find(".spwidget-lookup-selector-showhide,.spwidget-lookup-selector-cntr").remove(),f.inputLabel?f._cntr.find("div.spwidgets-lookup-input label").empty().append(f.inputLabel):f._cntr.find("div.spwidgets-lookup-input label").remove(),f.inputPlaceholder&&f._lookupInputEleCntr.find("input").attr("placeholder",f.inputPlaceholder),f.readOnly===!0&&(f._lookupInputEleCntr.css("display","none"),f._cntr.find("div.spwidget-lookup").addClass("spwidget-lookup-readyonly")),f._selectFields="",a.each(f.selectFields,function(a,b){f._selectFields+="<FieldRef Name='"+b+"'/>"}),f._templateTokens=String(f.template).match(/(\$\{.*?\})/g),null==f._templateTokens&&(f._templateTokens=[]),a.each(f._templateTokens,function(a,b){f._templateTokens[a]=b.replace(/[\$\{\}]/g,"")});var n=f._autocompleteCache={};return f._cntr.find("div.spwidgets-lookup-input input").autocomplete({minLength:2,appendTo:f._cntr,open:function(){a(this).autocomplete("widget").each(function(){return f.listHeight>0&&a(this).css("height",f.listHeight+"px"),!1})},source:function(b,g){b.term=a.trim(b.term);var h=String(a.trim(b.term)).toUpperCase();if(h in n)return void g(n[h]);n[h]=[];var i=[],j=String(b.term);if(null===j.match(/\D/)&&null!==j.match(/\d/))i.push("<Eq><FieldRef Name='ID'/><Value Type='Counter'>"+j+"</Value></Eq>");else{var k=[b.term];f.exactMatch||(k=String(b.term).split(/ /));for(var l=0,m=f.filterFields.length;m>l;l++){for(var o=[],p=0,q=k.length;q>p;p++)f._ignoreKeywordsRegEx.test(k[p])||o.push("<Contains><FieldRef Name='"+f.filterFields[l]+"'/><Value Type='Text'>"+k[p]+"</Value></Contains>");i.push(e({values:o,type:"AND"}))}}var r=e({values:i,type:"OR"});f.filter&&(r=e({values:[r,f.filter],type:"AND"})),c({operation:"GetListItems",listName:f.list,async:!0,CAMLQuery:"<Query><Where>"+r+"</Where>"+f.filterOrderBy+"</Query>",CAMLRowLimit:f.maxResults,CAMLViewFields:"<ViewFields>"+f._selectFields+"</ViewFields>",completefunc:function(b,c,e){a.each(e,function(a,b){b.value="",b.label=d(f.listTemplate,b),n[h].push(b)}),g(n[h])}})},select:function(a,b){f.showSelectedItems(b.item)}}).on("keyup.SPWidgets",function(b){if(13===b.which){var c=a(b.target).val();c&&String(c).length<f.minLength&&a(b.target).autocomplete("search",c+"    ")}}),f._ele.val()?f.showCurrentInputSelection().then(function(){a.isFunction(f.onReady)&&f.onReady.call(f._ele,f._cntr)}):a.isFunction(f.onReady)&&f.onReady.call(f._ele,f._cntr),this})},j.removeItem=function(b,c){var d=a(c).closest("div.spwidgets-item"),e=b._selectedItemsCntr,f=[];if(a.isFunction(b.onItemRemove)){if(d.each(function(){f.push(b.getItemObjectFromCache(a(this).data("spid")))}),b.onItemRemove.call(b._ele,d,f,b._cntr)===!1)return j;f=[]}return d.fadeOut("fast").promise().then(function(){d.remove(),!b.msgNoItems&&(b.allowMultiples===!1||b.allowMultiples===!0&&e.find("div.spwidgets-item").length<1)&&e.css("display","none"),b.allowMultiples===!1&&b.hideInput===!0&&b._lookupInputEleCntr.css("display",""),e.find("div.spwidgets-item").length<1&&b.msgNoItems&&e.append("<div>"+b.msgNoItems+"</div>"),e.find("div.spwidgets-item").each(function(){f.push(a(this).data("spid"))}),b._lookupInputEleCntr.find("input").focus(),b.storeItemIDs(f),b._ele.change()}),j},j.addItem=function(a,b){if(!b||"string"!=typeof b)return a;var c=a._ele.val();return""===c&&a.padDelimeter===!0&&(c+=";#"),c&&(c+=";#"),c+=b,a._ele.val(c),a.showCurrentInputSelection(),a},j.doSelectorDataInit=function(b){var e={$resultsCntr:b._selectorCntr.find("div.spwidget-lookup-selector-item-cntr"),nextPageToken:"",isLoading:!1,hasMorePages:!0,$lastPage:a(),queryXml:b.filter?"<Query><Where>"+b.filter+"</Where>"+b.filterOrderBy+"</Query>":"<Query>"+b.filterOrderBy+"</Query>"};return j._isLookupbodyEventDone||(j._isLookupbodyEventDone=!0,a("body").on("click",function(b){var c=a(b.target),d=a("div.spwidget-lookup-selector-cntr:visible"),e=null;d.length&&(e=c.closest("div.spwidget-lookup-selector-cntr"),!e.length&&c.is(".spwidget-lookup-selector-showhide")&&(e=c.parent().find("div.spwidget-lookup-selector-cntr")),d.not(e).hide())})),e.getListRows=function(){return a.Deferred(function(g){if(e.isLoading)return void g.resolveWith(a,[e.$lastPage]);e.isLoading=!0;var i=a("<div/>").insertBefore(e.$nextPage);e.$lastPage=i,c({operation:"GetListItems",listName:b.list,async:!0,CAMLQuery:e.queryXml,CAMLRowLimit:b.maxResults,CAMLViewFields:"<ViewFields>"+b._selectFields+"</ViewFields>",CAMLQueryOptions:function(){return""!==e.nextPageToken?"<QueryOptions><Paging ListItemCollectionPositionNext='"+h.escape(e.nextPageToken)+"'/></QueryOptions>":void 0}(),completefunc:function(c,h,j){var k=f({xDoc:c.responseXML,nodeName:"rs:data",asJQuery:!0}).eq(0),l="";e.nextPageToken=k.attr("ListItemCollectionPositionNext")||"",""===e.nextPageToken&&(e.hasMorePages=!1),a.each(j,function(a,c){b.addToAutocompleteCache(c),c.value="",c.label=d(b.listTemplate,c),l+='<div class="spwidget-lookup-item" data-spwidgetsindex="'+a+'">'+c.label+"</div>"}),i.html(l).find("div.spwidget-lookup-item").each(function(){var b=a(this);b.hover(function(){b.addClass("ui-state-hover")},function(){b.removeClass("ui-state-hover")})}).end().on("click","div.spwidget-lookup-item",function(){var c=a(this).data("spwidgetsindex");b.showSelectedItems(j[c])}),e.isLoading=!1,g.resolveWith(i,[i])}})})},e.$nextPage=a('<div class="ui-state-highlight spwidget-lookup-selector-next">Next...</div>').appendTo(e.$resultsCntr.empty()).click(function(){e.hasMorePages&&(e.$nextPage.css("display","none"),e.getListRows().then(function(a){e.hasMorePages?e.$nextPage.css("display",""):a.children().length||a.append("<div class='ui-state-highlight'>No Items Found!</div>"),e.$resultsCntr.scrollTop(a.position().top)}))}),e.$nextPage.click(),b},i.defaults=j.defaults,i}(Z,B,k,q,C,f,D,E),H='<div> <div class="pt-pickSPUser"> <div class="pt-pickSPUser-selected"> None Selected! </div> <div style="clear:both"></div> <div class="pt-pickSPUser-input" title="Type user name above to view search results."> <input name="pickSPUserInputField" type="text"> </div> </div> <div class="pt-pickSPUser-person"> <div class="pt-pickSPUser-person-cntr ui-state-default ui-corner-all"> <span class="pt-person-name"></span> <div class="pt-pickSPUser-person-actions"> <div class="tt-record-item-action-links"> <a class="tt-delete-icon" href="javascript:"> <img style="border: medium none; margin-right: 2px" alt="Delete" src="/_layouts/images/delitem.gif"> </a> <div style="clear:both"></div> </div> <div style="clear:both"></div> </div> </div> </div> </div>',I=function(a,b,c,d){var e=function(){var e=null,f=function(){return e.apply(this,arguments)};return f.defaults={searchText:"",maxResults:50,principalType:"All",webURL:"",cacheXML:!1,async:!0,completefunc:null},e=function(e){var g,h=a.extend({},f.defaults,e);return h.webURL?"/"!==h.webURL.charAt(h.webURL.length-1)&&(h.webURL+="/"):h.webURL=c(),h.webURL+="_vti_bin/People.asmx",h.cacheKey=h.webURL+"?"+[h.searchText,h.maxResults,h.principalType].join("|"),h.isCached=b.isCached(h.cacheKey),h.cacheXML&&h.isCached?(g=b(h.cacheKey),a.isFunction(h.completefunc)&&g.then(function(a,b){h.completefunc(a,b)}),g):(g=a.Deferred(function(c){h.isCached&&b.clear(h.cacheKey),a.ajax({type:"POST",cache:!1,async:h.async,url:h.webURL,contentType:"text/xml;charset=utf-8",dataType:"xml",data:'<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"><soap:Body><SearchPrincipals xmlns="http://schemas.microsoft.com/sharepoint/soap/"><searchText>'+h.searchText+"</searchText><maxResults>"+h.maxResults+"</maxResults><principalType>"+h.principalType+"</principalType></SearchPrincipals></soap:Body></soap:Envelope>",complete:function(e,f){return"error"===f||d(e)?(h.cacheXML&&b.clear(h.cacheKey),void c.rejectWith(a,[e,f])):(c.resolveWith(a,[e,f]),void(a.isFunction(h.completefunc)&&h.completefunc(e,f)))}})}).promise(),h.cacheXML&&b(h.cacheKey,g),g)},f}();return e}(Z,b,a,h),J=function(a,b){var c=function(){var c=null,d=function(){return c.apply(this,arguments)};return d.defaults={principalKeys:[],principalType:"All",addToUserInfoList:!0,async:!0},c=function(c){var e=a.extend({},d.defaults,c);e.webURL?"/"!==e.webURL.charAt(e.webURL.length-1)&&(e.webURL+="/"):e.webURL=b(),e.webURL+="/_vti_bin/People.asmx",a.isArray(e.principalKeys)||(e.principalKeys=[e.principalKeys]),e.principalXml="";var f,g,h=/<string>/i;for(f=0,g=e.principalKeys.length;g>f;f++)e.principalXml+=h.test(e.principalKeys[f])?e.principalKeys[f]:"<string>"+e.principalKeys[f]+"</string>";return a.ajax({type:"POST",cache:!1,async:e.async,url:e.webURL,contentType:"text/xml;charset=utf-8",beforeSend:function(a){a.setRequestHeader("SOAPAction","http://schemas.microsoft.com/sharepoint/soap/ResolvePrincipals")},dataType:"xml",data:'<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"><soap:Body><ResolvePrincipals xmlns="http://schemas.microsoft.com/sharepoint/soap/"><principalKeys>'+e.principalXml+"</principalKeys><principalType>"+e.principalType+"</principalType><addToUserInfoList>"+e.addToUserInfoList+"</addToUserInfoList></ResolvePrincipals></soap:Body></soap:Envelope>"})},d}();return c}(Z,a),K=void 0,L=function(a,b,c,d,e,f,g){var h,i={};return i.defaults={allowMultiples:!0,maxSearchResults:50,webURL:null,type:"User",onPickUser:null,onCreate:null,onRemoveUser:null,inputPlaceholder:"Type and Pick",appendTo:null,minLength:3,showSelected:!0,resolvePrincipals:!0,meKeyword:"[me]",meKeywordLabel:"Current User",filterSuggestions:null},h=function(f,h){var j=Array.prototype.slice.call(arguments,1),k=f;return"string"==typeof h?function(a){return a.is("input")&&a.hasClass("hasPickSPUser")?i.handleAction.apply(a,j):k}(k.eq(0)):k.each(function(){var f=a(this),j=a.extend({},i.defaults,h,{eleUserInput:f.css("display","none").addClass("hasPickSPUser")});j.webURL||(j.webURL=c()),j.maxSearchResults=parseInt(j.maxSearchResults)||50;var k=a(b).find(".pt-pickSPUser").clone(1).insertAfter(f);j.eleSelected=k.find("div.pt-pickSPUser-selected").empty().on("click",".tt-delete-icon",function(){i.removeUser(this)}),j.elePickInput=k.find("div.pt-pickSPUser-input"),j.isUserAlreadySelected=function(a,b){var c="div[data-pickspuserid='"+a+"']";return b&&(c+="[data-pickspusername='"+b.replace(/'/g,"\\'")+"']"),j.eleSelected.find(c).length>0},j.addPeopleToList=function(b,c){var d,e,f,h,k=String(b).split(";#"),l=k.length;for(d=0;l>d;d++)e=k[d],d++,f=k[d],"<userid/>"===e.toLowerCase()&&(f=j.meKeywordLabel),h=i.getUserHtmlElement(j,e,f).appendTo(j.eleSelected),function(b,c){var d=c;"<userid/>"===e.toLowerCase()&&(d=j.meKeyword),j.getSearchResults(d).done(function(d){var e=String(c).toLowerCase();
a.each(d,function(a,c){var d=String(c.displayName).toLowerCase();return d===e?(b.data("pickspuser_object",c),!1):void 0})})}(h,f,e);g(j.eleSelected.find("div.pt-pickSPUser-person-cntr")),j.allowMultiples===!1&&j.elePickInput.css("display","none"),i.storeListOfUsers(j.eleSelected,c)},j.getSearchResults=function(b){return a.Deferred(function(c){d({searchText:b,maxResults:j.maxSearchResults,principalType:j.type,async:!0,webURL:j.webURL,completefunc:function(d,e){var f=a(d.responseXML),g=[];String(j.meKeyword).indexOf(b.toLowerCase())>-1&&g.push({displayName:j.meKeywordLabel,accountId:"<UserID/>",accountName:j.meKeywordLabel,accountType:"User",value:j.meKeywordLabel,label:j.meKeywordLabel}),f.find("PrincipalInfo").each(function(){var b=a(this),c={displayName:b.find("DisplayName").text(),accountId:b.find("UserInfoID").text(),accountName:b.find("AccountName").text(),accountType:b.find("PrincipalType").text(),email:b.find("Email").text(),value:b.find("DisplayName").text(),label:""};c.label+=c.displayName,g.push(c)}),j.filterSuggestions&&(g=j.filterSuggestions(g)),c.resolveWith(d,[g,d,e])}})}).promise()},j.allowMultiples===!0&&j.eleSelected.addClass("pt-pickSPUser-selected-multiple");var l={};return j.elePickInput.find("input[name='pickSPUserInputField']").attr("placeholder",j.inputPlaceholder).autocomplete({minLength:j.minLength,appendTo:j.appendTo||j.elePickInput,source:function(a,b){return a.term in l?void b(l[a.term]):(l[a.term]=[],void j.getSearchResults(a.term).then(function(c){l[a.term].push.apply(l[a.term],c),b(l[a.term])}))},select:function(b,c){if(j.allowMultiples===!1)j.eleSelected.empty();else if(j.isUserAlreadySelected(c.item.accountId,c.item.displayName))return void setTimeout(function(){b.target.value=""},50);var d=function(){var d=i.getUserHtmlElement(j,c.item.accountId,c.item.displayName).appendTo(j.eleSelected);d.data("pickspuser_object",c.item),i.storeListOfUsers(k),g(k.find("div.pt-pickSPUser-person-cntr")),setTimeout(function(){b.target.value=""},50),j.allowMultiples===!1&&j.elePickInput.hide(),a.isFunction(j.onPickUser)&&j.onPickUser.call(j.eleUserInput,a.extend({},c.item)),f.trigger(a.Event("spwidget:peoplePickerAdd"),[j.eleUserInput,a.extend({},c.item)])};"-1"===c.item.accountId&&j.resolvePrincipals?e({principalKeys:c.item.accountName}).then(function(b){var e=a(b).find("PrincipalInfo");e.each(function(){var b=a(this);return b.find("Email").text()===c.item.email||b.find("DisplayName").text()===c.item.displayName?(c.item.accountId=e.find("UserInfoID").text(),d(),!1):void 0})}):d()}}),j.showSelected||k.find("div.pt-pickSPUser-selected").css("display","none"),k.data("pickSPUserContainerOpt",j),f.data("pickSPUserContainer",k),f.val()&&j.addPeopleToList(f.val(),!0),a.isFunction(j.onCreate)&&j.onCreate.call(f,f),f.trigger(a.Event("spwidget:peoplePickerCreate"),[j.eleUserInput]),this})},i.getUserHtmlElement=function(c,d,e){var f=a(b).find(".pt-pickSPUser-person").clone(1);return f.attr("data-pickSPUserID",d),f.find("span.pt-person-name").append(e).end().attr("data-pickSPUserNAME",e),f},i.removeUser=function(b){var c=a(b).closest("div.pt-pickSPUser"),d=c.data("pickSPUserContainerOpt"),e=a(b).closest("div.pt-pickSPUser-person"),f=e.data("pickspuser_object"),g=!0;a.isFunction(d.onRemoveUser)&&d.onRemoveUser.call(d.ele,d.ele,e,f),g!==!1&&(e.fadeOut("fast",function(){a(this).remove(),i.storeListOfUsers(c)}),d.allowMultiples===!1&&d.elePickInput.show("fast",function(){d.elePickInput.find("input").focus()}),d.eleUserInput.trigger(a.Event("spwidget:peoplePickerRemove"),[d.eleUserInput,f]))},i.storeListOfUsers=function(b,c){var d=a(b).closest("div.pt-pickSPUser"),e=d.data("pickSPUserContainerOpt"),f="",g={};d.find("div.pt-pickSPUser-selected div.pt-pickSPUser-person").each(function(){var b=a(this),c=b.attr("data-pickSPUserID")+";#"+a(this).attr("data-pickSPUserNAME");g[c]||(g[c]=!0,f&&(f+=";#"),f+=c)}),e.eleUserInput.val(f),c||e.eleUserInput.change()},i.handleAction=function(b,c,d){b=String(b).toLowerCase(),c=String(c).toLowerCase();var e=a(this).data("pickSPUserContainer").data("pickSPUserContainerOpt"),g=this;if("method"===b)switch(c){case"clear":e.eleUserInput.val(""),e.eleSelected.empty(),e.allowMultiples===!1&&(e.eleSelected.css("display","none"),e.elePickInput.show());break;case"destroy":a(this).hasClass("hasPickSPUser")&&a(this).removeClass("hasPickSPUser").next(".pt-pickSPUser").remove().show().trigger("change");break;case"add":e.addPeopleToList(d);break;case"remove":if(d){var h=e.eleSelected.find("div[data-pickspuserid='"+d+"']");h.length||(h=e.eleSelected.find("div[data-pickspusername='"+d.replace(/'/g,"\\'")+"']")),h.length&&i.removeUser(h)}break;case"getselected":g=f(e.eleUserInput.val())}return g},h.defaults=i.defaults,h}(Z,H,a,I,J,D,s),M='<div class="spwidget-filter" style="display: none"> <div class="spwidget-filter-column-cntr ui-widget-content"></div> <div class="spwidget-filter-button-cntr"> <button type="button" class="spwidget-button ui-priority-secondary" name="reset">Reset</button> <button type="button" class="spwidget-button" name="filter">Filter</button> </div> </div>',N='<div class="spwidget-column spwidget-type-{{type}}" data-spwidget_column_type="{{type}}" data-spwidget_list="{{list}}" data-spwidget_sp_type="{{sp_type}}" data-spwidget_sp_format="{{sp_format}}"> <div class="spwidget-filter-value-cntr"> <label>{{DisplayName}}</label> <div class="spwidget-filter-value-input"> __COLUMN__UI__ </div> </div> <div class="spwidget-filter-type-cntr" title="Match Options"> <select name="{{Name}}_type" class="spwidget-filter-type" tabindex="-1"> <option value="Contains">Contains</option> <option value="Eq" selected>Equal</option> <option value="Neq">Not Equal</option> <option value="IsNull">Is Blank</option> <option value="IsNotNull">Is Not Blank</option> __OTHER_FILTER_TYPES__ </select> <select name="{{Name}}_match" class="spwidget-match-type" tabindex="-1"> <option value="Or" selected>Any</option> <option value="And">All</option> </select> <select name="{{Name}}_order" class="spwidget-sort-order" tabindex="-1"> <option value="" selected>Sort</option> <option value="Asc">&#9650; Ascending</option> <option value="Des">&#9660; Descending</option> </select> </div> <div class="spwidget-column-actions"> <a style="display:none" href="javascript:" tabindex="-1" data-action="remove" class="spwidget-column-action"> <span class="ui-icon ui-icon-circle-close">remove</span> </a> <div class="spwidget-column-sort-actions"> <a href="javascript:" tabindex="-1" data-action="up" class="spwidget-column-action" title="Move up"> <span class="ui-icon ui-icon-circle-arrow-n">Move Up</span> </a> <a href="javascript:" tabindex="-1" data-action="down" class="spwidget-column-action" title="Move down"> <span class="ui-icon ui-icon-circle-arrow-s">Move Down</span> </a> </div> </div> </div>',O='<label> <input name="{{Name}}" title="{{DisplayName}}" type="checkbox" value="{{value}}" class="spwidget-input spwidget-filter-input"> {{value}} </label>',P='<div> <input name="{{Name}}" title="{{DisplayName}}" type="text" class="spwidget-input spwidget-filter-input"> <span class="spwidget-tooltip">{{tooltip}}</span> </div>',Q=void 0,R=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r,s={};return s.defaults={list:"",webURL:"",columns:["Title"],textFieldTooltip:"Use a semicolon to delimiter multiple keywords.",peopleFieldTooltip:"Use [me] keyword to represent current user.",definedClass:"spwidget-column-dirty",showFilterButton:!0,showFilterButtonTop:!0,filterButtonLabel:"Filter",onFilterClick:null,onReady:null,onReset:null,ignoreKeywords:/^(of|and|a|an|to|by|the|or|from)$/i,delimeter:";",height:null},r=function(g,i){var k=Array.prototype.slice.call(arguments,1),l=g;if("string"==typeof i){if(!l.eq(0).hasClass("hasSPFilterPanel"))return;return function(a){var b=a.eq(0).find("div.spwidget-filter").data("SPFilterPanelInst"),c=i.toLowerCase(),d=b.$ele;switch(c){case"getfilter":d=s.getFilterValues(b);break;case"setfilter":s.setFilterValues(b,k[1]);break;case"reset":s.doResetFilter(b);break;case"destroy":b.$ele.removeClass("hasSPFilterPanel").empty()}return d}(l)}return l.each(function(){var g=a.extend({},s.defaults,i),k={$ele:a(this),$ui:null,$uiFilterSortCntr:null,$uiFilterColumnCntr:null,$uiSortButtons:null,opt:g};return g.webURL||(g.webURL=f()),k.showSortOrder=function(){k.$uiFilterColumnCntr.hide(),k.$uiFilterSortCntr.show()},k.showFilterColumns=function(){k.$uiFilterSortCntr.hide(),k.$uiFilterColumnCntr.show()},k.buildWidget=function(){return a.Deferred(function(f){h({listName:g.list,cacheXML:!0,async:!0,webURL:g.webURL}).then(function(g){var h="",l=a.trim(c);k.$ui=a(a.trim(b)).appendTo(k.$ele.empty().addClass("hasSPFilterPanel")),k.$uiFilterColumnCntr=k.$ui.find("div.spwidget-filter-column-cntr"),k.$uiFilterSortCntr=k.$ui.find("div.spwidget-filter-sort-cntr"),k.opt.height&&k.$uiFilterColumnCntr.css("height",k.opt.height),a.each(k.opt.columns,function(b,c){var f=g.getColumn(c),i=l,m="",n=null;if(f){switch(n={type:null,otherFilterTypes:"",sp_type:f.Type,sp_format:f.Format,Name:f.Name,DisplayName:f.DisplayName},f.Type){case"Choice":case"MultiChoice":f.getColumnValues().forEach(function(b){m+=j(a.trim(d),{DisplayName:f.DisplayName,Name:f.Name,value:b})}),i=i.replace(/__COLUMN__UI__/,m).replace(/__OTHER_FILTER_TYPES__/,""),i=j(i,{DisplayName:f.DisplayName,type:"choice",Name:f.Name});break;case"Attachments":n.type="boolean",n.input_ui='<select name="'+n.Name+'" class="spwidget-input spwidget-filter-input"><option value=""></option><option value="1">Yes</option><option value="0">No</option></select>',i=j(i.replace(/__COLUMN__UI__/,n.input_ui).replace(/__OTHER_FILTER_TYPES__/,""),n);break;default:switch(f.Type){case"Lookup":case"LookupMulti":null===n.type&&(n.type="lookup",n.list=f.List,"Self"===n.list&&(n.list=f.getList().Title));break;case"User":case"UserMulti":null===n.type&&(n.type="people");break;case"Counter":case"Number":case"RatingCount":case"Likes":null===n.type&&(n.type="text",n.otherFilterTypes='<option value="Gt">Greater Than</option><option value="Lt">Less Than</option>');break;case"DateTime":null===n.type&&(n.type="date",n.otherFilterTypes='<option value="Gt">After</option><option value="Lt">Before</option>',n.sp_format="DateOnly"!==f.Format?"DateTime":"DateOnly");break;default:n.type="text"}m=a.trim(e),i=i.replace(/__COLUMN__UI__/,m).replace(/__OTHER_FILTER_TYPES__/,n.otherFilterTypes),i=j(i,a.extend(n,{DisplayName:f.DisplayName,Name:f.Name,tooltip:k.opt.textFieldTooltip}))}h+=i}}),k.$uiFilterColumnCntr.html(h),k.$ele.find("div.spwidget-type-lookup input").each(function(){var b=a(this);m(b,{list:b.closest("div.spwidget-column").data("spwidget_list"),template:'<div>{{Title}} <span class="spwidgets-item-remove">[x]</span></div>',listTemplate:"{{Title}}",allowMultiples:!0,readOnly:!1,filter:"",showSelector:!0}),b.parent().find(".spwidget-tooltip").remove()}),k.$ele.find("div.spwidget-type-people input").each(function(){var b=a(this),c=g.getColumn(b.attr("name")),d="User";"PeopleOnly"!==c.UserSelectionMode&&(d="All"),n(b,{allowMultiple:!0,type:d}),b.parent().find(".spwidget-tooltip").html(k.opt.peopleFieldTooltip)}),k.$ele.find("div.spwidget-type-date").each(function(){var b=a(this),c=b.find("input");return o(c,{allowMultiples:!0,showTimepicker:"DateTime"===b.data("spwidget_sp_format")?!0:!1}),b.find(".spwidget-tooltip").remove(),b.find("select.spwidget-filter-type").val("Eq").find("option[value='Contains']").remove(),this}),k.$ele.find(".spwidget-type-boolean div.spwidget-filter-type-cntr").css("display","none"),k.opt.showFilterButton||k.opt.showFilterButtonTop?k.$ui.find("div.spwidget-filter-button-cntr").each(function(){var b=a(this),c=a();k.opt.showFilterButtonTop&&(c=c.add(b.clone(!0)).prependTo(k.$ui)),k.opt.showFilterButton?c=c.add(b):b.remove(),c.find("button[name='filter']").button({icons:{primary:"ui-icon-search"},label:k.opt.filterButtonLabel}).on("click",s.onFilterButtonClick),c.find("button[name='reset']").button({icons:{primary:"ui-icon-arrowreturnthick-1-n"},text:!1}).on("click",function(){return s.doResetFilter(k),this})}):k.$ui.find("div.spwidget-filter-button-cntr").remove(),k.$ui.on("change.SPWidgets.SPFilterPanel","select.spwidget-filter-type,select.spwidget-sort-order",s.onFilterTypeChange).on("click.SPWidgets.SPFilterpanel","a.spwidget-column-action",s.onFilterTypeChange),""!==k.opt.definedClass&&k.$ui.on("change.SPWidgets.SPFilterPanel",".spwidget-filter-input",s.onFilterInputChange),k.$ui.data("SPFilterPanelInst",k),a.isFunction(k.opt.onReady)&&k.opt.onReady.call(k.$ele,i),k.$ui.fadeIn().promise().then(function(){a(this).css("display",""),f.resolve()})}).fail(function(){var a=this;k.$ele.html('<div class="ui-state-error">Unable to retrieve list information. '+q(a)+"</div>"),f.reject()})}).promise()},k.opt.ignoreKeywords&&!k.opt.ignoreKeywords instanceof RegExp&&(k.opt.ignoreKeywords=/Inst.opt.ignoreKeywords/i),k.buildWidget(),this})},s.onFilterInputChange=function(){var b=a(this),c=b.closest("div.spwidget-filter-value-input"),d=c.closest("div.spwidget-column"),e=b.val(),f=c.closest("div.spwidget-filter").data("SPFilterPanelInst");return d.is(".spwidget-type-choice")&&(c.find(".spwidget-filter-input:checked").length||(e="")),s.isColumnDirty(d)?d.addClass(f.opt.definedClass):d.removeClass(f.opt.definedClass),this},s.onFilterTypeChange=function(){var b=a(this),c=b.closest("div.spwidget-column"),d=c.find("div.spwidget-filter-type-cntr select.spwidget-match-type"),e=c.find("div.spwidget-filter-value-cntr"),f=e.find(".spwidget-input"),g="",h=b.val(),i=b.closest("div.spwidget-filter").data("SPFilterPanelInst");return b.is("select.spwidget-sort-order")?void(b.val()?(c.addClass("spwidget-has-sort-order"),c.addClass(i.opt.definedClass)):(c.removeClass("spwidget-has-sort-order"),s.isColumnDirty(c)||c.removeClass(i.opt.definedClass))):b.is("a.spwidget-column-action")?(g=b.data("action"),void(("up"===g||"down"===g)&&s.moveColumn(c,"up"===g?!0:!1))):("IsNull"===h||"IsNotNull"===h?(e.addClass("spwidget-disabled"),f.attr("disabled","disabled"),d.attr("disabled","disabled"),c.addClass(i.opt.definedClass)):(e.removeClass("spwidget-disabled"),f.removeAttr("disabled","disabled"),d.removeAttr("disabled"),s.isColumnDirty(c)||c.removeClass(i.opt.definedClass)),this)},s.onFilterButtonClick=function(){var b=a(this).closest("div.spwidget-filter").data("SPFilterPanelInst"),c=null;return a.isFunction(b.opt.onFilterClick)&&(c=s.getFilterValues(b),b.opt.onFilterClick.call(b.$ele,c)),this},s.doResetFilter=function(b){return a.isFunction(b.onReset)&&b.onReset.call(b.$ele,s.getFilterValues(b))===!0?b:(b.$ui.find("div[data-spwidget_column_type='text'] input").val("").end().find("div[data-spwidget_column_type='choice'] input").prop("checked",!1).end().find("div[data-spwidget_column_type='boolean'] .spwidget-filter-value-input select").val(""),o(b.$ui.find(".hasSPDateField"),"reset"),n(b.$ui.find(".hasPickSPUser"),"method","clear"),m(b.$ui.find(".hasLookupSPField"),"method","clear"),""!==b.opt.definedClass&&b.$ui.find("."+b.opt.definedClass).removeClass(b.opt.definedClass),b.$ui.find("select.spwidget-filter-type").each(function(){var b=a(this),c=b.val();("IsNull"===c||"IsNotNull"===c)&&(b.val("Eq"),b.change())}),b.$ui.find("select.spwidget-sort-order").val("").change(),b)},s.getFilterValues=function(b){function c(a){return k({type:a.logicalType,values:a.values,onEachValue:function(b){return"<"+a.matchType+"><FieldRef Name='"+a.columnName+"' /><Value Type='Text'>"+l.escape(b)+"</Value></"+a.matchType+">"}})}var d={CAMLQuery:"",CAMLOrderBy:"",URLParams:"",filters:{},count:0,columns:[]},e=b.$ui.find("div.spwidget-column"),f=[],g="";return e.each(function(e,h){var j=a(h),l=j.find(".spwidget-input"),m=l.attr("name"),n=new s.ColumnFilter({columnName:m,matchType:j.find("select.spwidget-filter-type").val(),logicalType:j.find("select.spwidget-match-type").val(),sortOrder:j.find("select.spwidget-sort-order").val()}),p=j.data("spwidget_column_type"),q={};if(n.sortOrder&&(n.CAMLOrderBy+='<FieldRef Name="'+m+'" Ascending="'+("Asc"===n.sortOrder?'TRUE"':'FALSE"')+"/>"),"IsNull"===n.matchType||"IsNotNull"===n.matchType)n.CAMLQuery="<"+n.matchType+"><FieldRef Name='"+m+"' /></"+n.matchType+">",n.count+=1;else switch(p){case"choice":case"multichoice":l.each(function(){var b=a(this),c=b.val();b.is(":checked")&&n.values.push(c)}),n.values.length&&(n.count=n.values.length,n.CAMLQuery=c(n));break;case"lookup":case"people":!function(){var b=[];l.each(function(){var c,d,e=a(this),f=i(e.val());for(c=0,d=f.length;d>c;c++)f[c].id&&(n.values.push(f[c].id+";#"+f[c].title),b.push(f[c].id))}),n.values.length&&(n.count=n.values.length,n.CAMLQuery=k({type:n.logicalType,values:b,onEachValue:function(a){return"<"+n.matchType+"><FieldRef Name='"+n.columnName+"' LookupId='True'/><Value Type='Lookup'>"+a+"</Value></"+n.matchType+">"}}))}();break;case"date":l.each(function(){var a=o(l,"getDate");return a.dates.length&&(n.values=a.dates,n.count=n.values.length,n.CAMLQuery=k({type:n.logicalType,values:n.values,onEachValue:function(a){return"<"+n.matchType+"><FieldRef Name='"+n.columnName+"'/><Value Type='DateTime'>"+a+"</Value></"+n.matchType+">"}})),!1});break;case"text":case"boolean":String(a.trim(l.val())).length&&!function(){var d,e,f,g=l.val().split(b.opt.delimeter);for(d=0,e=g.length;e>d;d++)f=a.trim(g[d]),!b.opt.ignoreKeywords.test(f)&&f&&n.values.push(f);n.CAMLQuery=c(n),n.count=n.values.length}()}(n.count>0||n.CAMLOrderBy)&&(q[m]={},n.CAMLOrderBy&&(g+=n.CAMLOrderBy,q[m].sortOrder=n.sortOrder),n.count>0&&(f.push(n.CAMLQuery),d.count+=n.count,d.filters[m]=n,q[m].matchType=n.matchType,q[m].logicalType=n.logicalType,q[m].values=n.values),(n.CAMLOrderBy||n.count>0)&&d.columns.push(n.columnName),n.URLParams=a.param(q,!1),""!==d.URLParams&&(d.URLParams+="&"),d.URLParams+=n.URLParams)}),d.count>1?d.CAMLQuery=k({type:"AND",values:f}):1===d.count&&(d.CAMLQuery=f[0]),g&&(d.CAMLOrderBy+="<OrderBy>"+g+"</OrderBy>"),d},s.setFilterValues=function(b,c){return"object"!=typeof c||a.isEmptyObject(c)?b:(s.doResetFilter(b),a.each(c,function(c,d){var e=b.$ui.find(".spwidget-filter-input[name='"+c+"']"),f=e.closest("div.spwidget-column"),g=f.data("spwidget_column_type"),h=f.find("select[name='"+c+"_type']"),i=f.find("div.spwidget-filter-type-cntr select.spwidget-match-type"),j=f.find("select.spwidget-sort-order"),k=new s.ColumnFilter;if(a.extend(k,d),"boolean"!==g&&(k.matchType&&"boolean"!==g&&h.val(k.matchType),k.logicalType&&i.val(k.logicalType)),"boolean"===g||"IsNull"!==d.matchType&&"IsNotNull"!==d.matchType)switch(g){case"text":case"boolean":e.val(k.values instanceof Array?k.values.join(b.opt.delimeter):k.values);break;case"choice":case"multichoice":a.each(k.values,function(a,b){e.filter("[value='"+b+"']").prop("checked",!0)});break;case"lookup":m(e,"method","add",k.values.join(";#"));break;case"people":n(e,"method","add",k.values.join(";#"));break;case"date":"DateTime"===f.data("spwidget_sp_format")?o(e,"setDate",k.values):o(e,"setDate",k.values,"yy-mm-dd")}else h.change();k.sortOrder&&j.val("asc"===String(k.sortOrder).toLowerCase()?"Asc":"Des"),j.change(),e.change()}),b)},s.ColumnFilter=function(a){var b=function(){},c=new b;return"object"!=typeof a&&(a={}),c.columnName=a.columnName||"",c.matchType=a.matchType||"",c.logicalType=a.logicalType||"",c.sortOrder=a.sortOrder||"",c.values=a.values||[],c.CAMLQuery=a.CAMLQuery||"",c.CAMLOrderBy=a.CAMLOrderBy||"",c.URLParams=a.URLParams||"",c.count=a.count||0,c},s.moveColumn=function(a,b){var c=a.parent().children(),d=c.length,e=c.index(a);b&&0===e||(b||e+1!==d)&&(b?a.insertBefore(a.prev()):a.insertAfter(a.next()))},s.isColumnDirty=function(b){var c=!1,d=b.data("spwidget_column_type"),e=b.find(".spwidget-input");return"choice"===d||"multichoice"===d?e.filter(":checkbox").each(function(){var b=a(this);return b.is(":checked")?(c=!0,!1):void 0}):e.val()&&(c=!0),c||(e=b.find("select.spwidget-sort-order"),e.val()&&(c=!0)),c},r.defaults=s.defaults,r}(Z,M,N,O,P,a,i,m,D,q,C,E,G,L,A,h,o),S='<div class="SPControlUploadUI spcontrolupload"> <div class="mainContainer"> <div class="buttonPane ui-state-default"> <div class="upload_button"> Upload </div> </div> <div class="iFrameWindow ui-state-default"> <iframe name="SPControlUploadUI" frameborder="0" scrollbars="yes" scrolling="yes"></iframe> </div> <div class="loadingOverlay ui-widget-content"> <div class="loadingOverlayMsg"></div> </div> <div class="spwidget-success-cntr ui-widget-content"> <div class="spwidget-msg-cntr"> <span class="spwidget-msg">Upload Successful!</span> <span class="spwidget-close">x</span> </div> </div> <div class="spwidget-error-cntr ui-state-error"> <div class="spwidget-msg-cntr"> <span class="spwidget-msg">Error</span> <span class="spwidget-close">x</span> </div> </div> </div> </div> <div id="SPControlUploadModUI" style="position:   absolute;\r\n        width:      99.9%;\r\n        height:     99.9%;\r\n        left:       0px;\r\n        top:        0px;\r\n        padding-left:       .5em;\r\n        background-color:   white"> <div class="SPControlUploadModUIFileSelected" style="background-position: left center;\r\n        background-repeat: no-repeat;\r\n        background-image: url(\'/_layouts/images/urn-content-classes-smartfolder16.gif\');\r\n        padding: 0.5em 2em">Select...</div> </div>',T=function(){var a=function(a){var b={12:"2007",14:"2010",15:"2013"},c=12,d=!1;return"undefined"!=typeof SP&&(c=14,SP.ClientSchemaVersions&&SP.ClientSchemaVersions.currentVersion&&(c=parseInt(SP.ClientSchemaVersions.currentVersion),d=!0),d||"undefined"==typeof _spPageContextInfo||(c=parseInt(_spPageContextInfo.webUIVersion),4===c&&(c=14))),a&&(c=b[c]||c),c};return a}(),U=void 0,V=function(a,b,c,d,e,f){var g,h={};return h.isInitDone=!1,h.defaults={listName:"",folderPath:"",uploadDonePage:"",onPageChange:null,onUploadDone:null,uploadUrlOpt:"",overwrite:!1,uploadPage:"",overlayClass:"",overlayBgColor:"white",overlayMessage:"<div>Working on it</div>",selectFileMessage:"Click here to select file...",uploadDoneMessage:"Upload Successful!",fileNameErrorMessage:'A file name cannot contain any of the following characters: \\ / : * ? " &lt; &gt; | # { } % ~ &amp;',noFileErrorMessage:"No file selected!",checkInFormHeight:"25em",webURL:null,debug:!1,filenameInputSelector:"input[id$='onetidIOFile']"},g=function(c,g){return h.isInitDone||(h.isInitDone=!0,h.defaults.webURL||(h.defaults.webURL=e())),c.each(function(){var c,e=a.extend({},h.defaults,g);if(e.log=e.debug?h.log:function(){},e.showHideBusy=function(b){return a.Deferred(function(a){b?e.$busyOverlay.fadeOut("fast").promise().then(function(){a.resolve()}):e.$busyOverlay.fadeIn("slow").promise().then(function(){a.resolve()})}).promise()},e.showHideFullForm=function(a){return a?(e.$content.removeClass("spwidget-show-full-form"),e.$iframeCntr.css({overflow:"",height:""})):(e.$content.addClass("spwidget-show-full-form"),e.$iframeCntr.css({overflow:"auto",height:"auto"})),e},e.showHideSuccess=function(a){return a?e.$successCntr.stop().fadeOut().promise(function(){e.$successCntr.css("display","none")}):e.$successCntr.stop().show().promise(function(){e.$successCntr.css("display","block")}),e},e.showError=function(b){var c=a.extend({},{message:"",autoHide:!0},b);return e.$errorCntrMsg.html(c.message),e.$errorCntr.stop().css("display","block"),c.autoHide&&e.$errorCntr.animate({opacity:1},5e3,function(){e.clearError()}),e},e.clearError=function(){return e.$errorCntr.css("display","none"),e},e.resetWidget=function(){return e.ev={state:1,action:"uploading",hideOverlay:!0,pageUrl:"",page:null,isUploadDone:!1,file:{}},e.$iframe.attr("src",e.uploadPage),e},e.getUploadedFileRow=function(){var a={};return d({async:!1,webURL:e.webURL,listName:e.listName,CAMLQuery:"<Query><Where><Eq><FieldRef Name='Author' LookupId='TRUE'/><Value Type='Integer'><UserID/></Value></Eq></Where><OrderBy><FieldRef Name='Modified' Ascending='FALSE'/></OrderBy></Query>",CAMLViewFields:"<ViewFields><FieldRef Name='ID'/><FieldRef Name='EncodedAbsUrl'/><FieldRef Name='FileLeafRef' /><FieldRef Name='Author' /><FieldRef Name='Editor' /><FieldRef Name='Created' /><FieldRef Name='Modified' /></ViewFields>",CAMLRowLimit:1,CAMLQueryOptions:"<QueryOptions><ViewAttributes Scope='Recursive' /></QueryOptions>",completefunc:function(b,c,d){d.length&&(a=d[0])}}),a},e.isUploadPage=function(a){var b=!1,c=document.createElement("a"),d=null;return c.href=String(a).toLowerCase(),e.userUploadPage?(d=document.createElement("a"),d.href=String(e.userUploadPage).toLowerCase(),c.pathname===d.pathname&&(b=!0)):b=/upload(ex)?\.aspx$/.test(c.pathname),b},e.listName&&0!==e.listName.indexOf("{")&&(e.listName=h.getListUID(e.listName)),!e.listName)return a(this).html('<div class="ui-state-error">Input parameter [listName] not valid!</div>'),this;if(e.spVersion=f(!0),e.userUploadPage=e.uploadPage,e.uploadPage=String(e.uploadPage),e.uploadPage){if(-1===e.uploadPage.toLowerCase().indexOf("http")){var i="/";0===e.uploadPage.indexOf("/")&&(i=""),e.uploadPage=e.webURL+i+e.uploadPage}}else switch(e.spVersion){case"2013":e.uploadPage=e.webURL+"/_layouts/15/UploadEx.aspx";break;case"2010":e.uploadPage=e.webURL+"/_layouts/UploadEx.aspx";break;default:e.uploadPage=e.webURL+"/_layouts/Upload.aspx"}return e.uploadDonePage=String(e.uploadDonePage),e.uploadDonePage||(e.uploadDonePage=e.webURL+"/_layouts/images/STS_ListItem_43216.gif"),e._iframeLoadId=1,e._uploadUrlParams="?List="+encodeURIComponent(e.listName)+"&RootFolder="+encodeURIComponent(e.folderPath)+"&Source="+encodeURIComponent(e.uploadDonePage)+"&"+(new Date).getTime()+"=1&"+e.uploadUrlOpt,e.uploadPage=e.uploadPage+e._uploadUrlParams,e._lastError="",e._reloadCount=0,e.ev={state:1,action:"uploading",hideOverlay:!0,pageUrl:"",page:null,isUploadDone:!1,file:{}},e.$ele=a(this),c={},e.overlayBgColor&&(c["background-color"]=e.overlayBgColor),e.$cntr=a(a(b).filter("div.SPControlUploadUI").clone()).appendTo(e.$ele.addClass("hasSPControlUploadUI").empty()).data("SPControlUploadOptions",e),e.$buttonCntr=e.$cntr.find("div.buttonPane").click(function(){h.onUpload(this)}),e.$content=e.$cntr.find("div.mainContainer"),e.$iframeCntr=e.$cntr.find("div.iFrameWindow"),e.$iframe=e.$iframeCntr.children("iframe"),e.$busyOverlay=e.$cntr.find("div.loadingOverlay"),e.$busyOverlayMsg=e.$busyOverlay.find("div.loadingOverlayMsg"),e.$successCntr=e.$cntr.find("div.spwidget-success-cntr"),e.$errorCntr=e.$cntr.find("div.spwidget-error-cntr"),e.$errorCntrMsg=e.$errorCntr.find(".spwidget-msg"),e.reInvalidChr=new RegExp('[\\/:*?"<>|#{}%~&]'),e.$successCntr.on("click",".spwidget-close",function(){e.showHideSuccess(!0)}).find(".spwidget-msg").html(e.uploadDoneMessage),e.$errorCntr.on("click",".spwidget-close",function(){e.clearError()}),e.$busyOverlay.addClass(e.overlayClass).css(c),e.$busyOverlayMsg.html(e.overlayMessage),e.showHideBusy(),e.$cntr.find("iframe").css("height",e.checkInFormHeight).load(function(){h.onIframeChange(e.$ele.find(".SPControlUploadUI"))}).attr("src",e.uploadPage).end(),this})},h.onUpload=function(b){var c=a(b).closest(".SPControlUploadUI"),d=c.find("iframe").contents(),e=d.find("input[type='file']").closest("tr").siblings().find("span"),f=c.data("SPControlUploadOptions"),g=f.ev;return f.log("Upload.onUpload("+f._iframeLoadId+"): Start...."),e.css("display","none"),d.find("input[type='file']").val()?f.reInvalidChr.test(d.find("div.SPControlUploadModUIFileSelected").text())?void f.showError({message:f.fileNameErrorMessage}):(g.state=2,g.action="preLoad",f.onPageChange&&f.onPageChange.call(f.$ele,g)===!1?!1:(f.showHideFullForm(!0),void f.showHideBusy().then(function(){return f.log("Upload.onUpload("+f._iframeLoadId+"): Clicking the OK button on upload form."),d.find("input[type='button'][id$='btnOK']").click(),e.is(":visible")?(f.log("Upload.onUpload("+f._iframeLoadId+"): Error message reported! \n"+e.text()),c.find(".loadingOverlay").css("display","none").end(),!1):void 0}))):void f.showError({message:f.noFileErrorMessage})},h.isSPBusyAnimation=function(a){return a.find("#GearPage").length?!0:a.find("#ms-loading-box").length?!0:!1},h.onIframeChange=function(c){var d=a(c).closest(".SPControlUploadUI"),e=d.data("SPControlUploadOptions"),f=0,g=a(d.find("iframe").contents());if(e.debug)try{e.log("Upload.onIframeChange(): ENTERING... Document readyState: "+g[0].readyState+" IFRAME URL: "+g[0].location.href)}catch(i){}return h.isSPBusyAnimation(g)?void e.log("Upload.onIframeChange(): EXITING... Gear page displyed."):2===e.ev.state&&"preLoad"===e.ev.action&&g[0].spcontrolupload_init_done===!0?(e.log("Upload.onIframeChange("+e._iframeLoadId+"): Exiting! ev.action=["+e.ev.action+"] and ev.state=["+e.ev.state+"] - Nothing to do. Action handled by onUpload(). Setting action to postLoad"),void(e.ev.action="postLoad")):(e._iframeLoadId++,f=e._iframeLoadId,e.log("Upload.onIframeChange("+f+"): State=["+e.ev.state+"] Action=["+e.ev.action+"]"),void setTimeout(function(){if(f!==e._iframeLoadId)return void e.log("Upload.onIframeChange("+f+"): not latest invokation! Existing.");var c=e.ev,i=g.find("form").eq(0);if(g=a(d.find("iframe").contents()),e.log("Upload.onIframeChange("+f+"): STARTING... Executing setTimeout(). URL:"+g[0].location.href),g.spcontrolupload_init_done===!0)return void e.log("Upload.onIframeChange("+f+"): EXITING!!! Page was already processed!");if(g.spcontrolupload_init_done=!0,c.pageUrl=g[0].location.href,c.page=g,e.$iframeCntr.scrollTop(0),g.scrollTop(0),e.isUploadPage(c.pageUrl)){if(e.log("Upload.onIframeChange("+f+"): URL is the upload page!"),g.find("body").css({overflow:"hidden"}),i.children(":visible").hide().end().append(a(b).filter("div#SPControlUploadModUI").clone()).find("div.SPControlUploadModUIFileSelected").html(e.selectFileMessage),new RegExp(/error/i).test(a.trim(g.find(".ms-pagetitle").text()))||new RegExp(/error/i).test(a.trim(g.find("title").text()))||new RegExp(/error\.aspx/i).test(a.trim(g.find("form").attr("action"))))return e.log("Upload.onIframeChange("+f+"): page displaying an error... Storing it and reloading upload form."),e._lastError=g.find("[id$='LabelMessage']").text(),e._reloadCount>1?(alert("Error encountered during upload which is causing program to loop. Last upload error was: "+e._lastError),void d.find(".loadingOverlay").fadeOut()):(e._reloadCount+=1,void d.find("iframe").attr("src",e.uploadPage));if(h.isSPBusyAnimation(g)&&!g.find("input[type='file']").length)return void e.log("Upload.onIframeChange("+f+"): SP processing page (GearPage)... Exiting and waiting for next page...");g.find("input[type='file']").closest("table").appendTo(g.find("#SPControlUploadModUI")).removeClass("ms-authoringcontrols");var j=g.find("#SPControlUploadModUI").find("input[type='file']").closest("tr").siblings().css("display","none").end().end().siblings("tr .ms-error").css("display","").end().on("change focus click",function(){var b=a(this),c=b.val(),d="",f="/_layouts/images/urn-content-classes-smartfolder16.gif";if(c){try{d=c.substr(c.lastIndexOf(".")+1)}catch(h){d="GEN"}f="/_layouts/images/IC"+d.toUpperCase()+".GIF",c=c.replace(/\\/g,"/").split("/").pop()||c}else c=e.selectFileMessage;g.find("#SPControlUploadModUI > div").html(c).css("background-image","url('"+f+"')")}).css({cursor:"pointer",height:"100px",position:"absolute",left:"0px",top:"0px",filter:"alpha(opacity=1)",opacity:"0.01",outline:"none","-moz-opacity":"0.01","font-size":"100px","z-index":"5"});i.on("mousemove",function(a){j.css({left:a.pageX-(j.width()-50),top:a.pageY-30}).blur()}),e._lastError&&(e.showError({message:e._lastError}),e._lastError=""),e._reloadCount=0,e.overwrite?g.find("input[type='checkbox'][name$='OverwriteSingle']").prop("checked","checked"):g.find("input[type='checkbox'][name$='OverwriteSingle']").prop("checked",""),c.state=1,c.action="postLoad",c.hideOverlay=!0}else{if(e.log("Upload.onIframeChange("+e._iframeLoadId+"): File uploaded to server! Need ["+e.uploadDonePage+"] to be done."),c.state=3,c.action="postLoad",c.hideOverlay=!0,c.file=e.getUploadedFileRow(),h.isSameUrlPage(c.pageUrl,e.uploadDonePage))e.log("Upload.onIframeChange("+e._iframeLoadId+"): Upload widget process DONE!"),c.isUploadDone=!0,c.hideOverlay=!1,e.showHideBusy(),e.showHideSuccess();
else if(e.log("Upload.onIframeChange("+e._iframeLoadId+"): Post Upload Form being displayed! Hooking into form.onsubmit!"),i.length){var k=i.prop("onsubmit"),l=i.find(e.filenameInputSelector).eq(0);l.length&&(i.children(":visible").css("display","none").addClass("ptWasVisible"),l.closest("div[id^='WebPart']").appendTo(i).css("display","").removeClass("ptWasVisible")),i[0].onsubmit=function(){e.log("Upload.onIframeChange("+f+"): iframe form.onsubmit triggered!"),e.showHideBusy();var b=!0;return a.isFunction(e.onPageChange)&&(b=e.onPageChange.call(e.$ele,a.extend({},c,{state:3,action:"preLoad"}))),b===!1?(e.showHideBusy(!0),b):(a.isFunction(k)&&(b=k()),b===!1?(e.showHideBusy(!0),b):(e.showHideFullForm(!0),b))}}a(d.find("iframe")[0].contentWindow).unload(function(){return e.log("Upload.onIframeChange("+e._iframeLoadId+"): iframe.unload() triggered!"),e.showHideBusy(),e.showHideFullForm(!0),a.isFunction(e.onPageChange)?e.onPageChange.call(e.$ele,a.extend({},c,{state:3,action:"preLoad"})):void 0})}e.log("Upload.onIframeChange("+e._iframeLoadId+"): iframe page setup done!"),e.onPageChange&&e.onPageChange.call(e.$ele,c),("postload"!==c.action.toLowerCase()||c.hideOverlay===!0)&&(e.showHideBusy(!0),c.isUploadDone===!1&&3===c.state&&e.showHideFullForm()),c.isUploadDone&&(e.resetWidget(),e.$successCntr.animate({opacity:1},3e3,function(){e.showHideSuccess(!0)}),a.isFunction(e.onUploadDone)&&e.onUploadDone.call(e.$ele,c.file))},500))},h.isSameUrlPage=function(a,b){if(!a||!b)return!1;var c=function(a){var b=document.createElement("a");return b.href=a,unescape(b.pathname)},d=String(c(a)).toLowerCase(),e=String(c(b)).toLowerCase();return d===e},h.getListUID=function(a){if(!a)return"";var b="";return c({listName:a,async:!1,cacheXML:!0}).then(function(a){b=a.ID}),b},h.log=function(){var b,c,d=1,e=0,f=!1,g=!1,h=["#FFFFFF","#F5F5F2"];return"undefined"==typeof console||"undefined"==typeof console.debug?b=function(){var a,b,f="";for(a=0,b=arguments.length;b>a;a++)f+='<div style="padding: .1em .1em;background-color:'+h[e]+'"><span>['+d+"] </span>"+arguments[a]+"</div>",d++,e=1===e?0:1;f&&(c.append(f),c.dialog("isOpen")||c.dialog("open"))}:f=!0,function(){if(g||(g=!0,f||(c=a("<div><h2>SPWidgets Debug Output</h2></div>").appendTo("body").dialog({title:"Debug output",height:300}))),f){var d,e;for(d=0,e=arguments.length;e>d;d++)console.debug(arguments[d])}else b.apply(this,arguments)}}(),g.defaults=h.defaults,g}(Z,S,i,k,a,T),W=function(a,b,c,d){var e=function(){var e=null,f=function(){return e.apply(this,arguments)};return f.defaults={webURL:"",cacheXML:!1,async:!0,completefunc:null,filter:null},e=function(e){var g,h=a.extend({},f.defaults,e);return h.webURL?"/"!==h.webURL.charAt(h.webURL.length-1)&&(h.webURL+="/"):h.webURL=c(),h.webURL+="_vti_bin/SiteData.asmx",h.cacheKey=h.webURL+"?"+[h.filter].join("|"),h.isCached=b.isCached(h.cacheKey),h.cacheXML&&h.isCached?(g=b(h.cacheKey),a.isFunction(h.completefunc)&&g.then(function(b,c,d){h.completefunc.call(a,c,d,b)}),g):(g=a.Deferred(function(c){h.isCached&&b.clear(h.cacheKey),a.ajax({type:"POST",cache:!1,async:h.async,url:h.webURL,contentType:"text/xml;charset=utf-8",dataType:"xml",data:'<?xml version="1.0" encoding="utf-8"?><soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"><soap:Body><GetListCollection xmlns="http://schemas.microsoft.com/sharepoint/soap/"></GetListCollection></soap:Body></soap:Envelope>',complete:function(e,f){if("error"===f||d(e))return h.cacheXML&&b.clear(h.cacheKey),void c.rejectWith(a,[null,e,f]);var g=a(e.responseXML).find("_sList"),i=[];h.filter&&!a.isArray(h.filter)&&(h.filter=[h.filter]),g.each(function(){var b=a(this),c={};h.filter&&a.isArray(h.filter)&&-1===a.inArray(b.find("Title").text(),h.filter)&&-1===a.inArray(b.find("InternalName").text(),h.filter)||(b.children().each(function(){c[this.nodeName]=a(this).text()}),i.push(c))}),c.resolveWith(a,[i,e,f]),a.isFunction(h.completefunc)&&h.completefunc(e,f,i)}})}).promise(),h.cacheXML&&b(h.cacheKey,g),g)},f}();return e}(Z,b,a,h),X=function(a,b,c,d){var e=function(){var e=null,f=null,g=function(){return null===f&&(f=this),e.apply(this,arguments)};return g.defaults={accountName:"",otherAttr:"",webURL:"",async:!0,cacheXML:!0,completefunc:null},e=function(e){var f,h=a.extend({},g.defaults,e);return h.webURL?"/"!==h.webURL.charAt(h.webURL.length-1)&&(h.webURL+="/"):h.webURL=c(),h.cacheKey=h.webURL+"/"+h.accountName,h.cacheXML===!0&&b.isCached(h.cacheKey)?(f=b.get(h.cacheKey),a.isFunction(h.completefunc)&&f.then(function(a,b,c){h.completefunc(b,c,a)}),f):(f=a.Deferred(function(c){a.ajax({type:"POST",cache:!1,async:h.async,url:h.webURL+"_vti_bin/UserProfileService.asmx",beforeSend:function(a){a.setRequestHeader("SOAPAction","http://microsoft.com/webservices/SharePointPortalServer/UserProfileService/GetUserProfileByName")},contentType:"text/xml;charset=utf-8",dataType:"xml",data:'<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"><soap:Body><GetUserProfileByName xmlns="http://microsoft.com/webservices/SharePointPortalServer/UserProfileService"><AccountName>'+h.accountName+"</AccountName></GetUserProfileByName></soap:Body></soap:Envelope>",complete:function(e,f){var g=a(e.responseXML),i={};return"error"===f||d(g)?(h.cacheXML&&b.clear(h.cacheKey),c.rejectWith(a,[{},e,f]),void(a.isFunction(h.completefunc)&&h.completefunc(e,f,{}))):(g.find("PropertyData").each(function(){var b=a(this);i[b.find("Name").text()]=b.find("Value").text()||""}),h.otherAttr&&a.extend(i,h.otherAttr),c.resolveWith(a,[i,e,f]),void(a.isFunction(h.completefunc)&&h.completefunc.call(a,e,f,i)))}})}).promise(),h.cacheXML&&b(h.cacheKey,f),f)},g}();return e}(Z,b,a,h),Y=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A){a.SPWidgets={defaults:{},version:"2.5.2",escapeXML:j.escape,unEscapeXML:j.unescape,fillTemplate:k,getCamlLogical:l,getSPVersion:m,parseDateString:n,parseLookupFieldValue:o,SPGetDateString:p,makeSameHeight:r,getRuntimeInfo:function(){function b(){return this.SPWidgets=a.SPWidgets.version,this.jQuery=a.fn.jquery||"?",this.jQueryUI="?",this.jQueryUICss="?",this}b.prototype.asString=function(){var a,b=this,c="";for(a in b)b.hasOwnProperty(a)&&(c+="[ "+a+" = "+b[a]+" ] ");return c};var c=new b,d=a('<div style="position:fixed;width:100px;left:-1000px;"/>').appendTo("body"),e="";try{c.jQueryUI=jQuery.ui.version}catch(f){}return e=d.css("background-image"),d.addClass("ui-widget-header"),d.css("background-image")!==e&&(c.jQueryUICss="loaded"),d.remove(),c},SPAPI:{getList:s,getListColumns:t,getListFormCollection:u,getListItems:v,getSiteListCollection:w,getSiteUrl:x,getUserProfile:y,resolvePrincipals:z,searchPrincipals:A,getNodesFromXml:q}},a.each({SPShowBoard:b,SPDateField:c,SPLookupField:d,pickSPUser:e,SPFilterPanel:f,SPControlUpload:g,SPGetMsgError:h,SPMsgHasError:i},function(b,c){a.fn[b]=function(){var a=Array.prototype.slice.call(arguments);return a.unshift(this),c.apply(c,a)},c.defaults&&(a.SPWidgets.defaults[b]=c.defaults)})}(Z,v,A,G,L,R,V,o,h,E,q,C,T,y,D,x,f,r,i,m,n,k,W,a,X,J,I),function(a){var b=document,c="appendChild",d="styleSheet",e=b.createElement("style");e.type="text/css",b.getElementsByTagName("head")[0][c](e),e[d]?e[d].cssText=a:e[c](b.createTextNode(a))}('div.spwidget-board{width:100%;position:relative}div.spwidget-board div.spwidget-board-headers,div.spwidget-board div.spwidget-board-headers-cntr,div.spwidget-board div.spwidget-board-states-cntr,div.spwidget-board div.spwidget-board-states{width:100%}div.spwidget-board div.spwidget-board-state{width:49%;float:left;margin:0% .1%;padding:.2%;overflow:auto}div.spwidget-board div.spwidget-board-headers-cntr div.spwidget-board-state{font-weight:700;font-size:1.1em;overflow:hidden;word-wrap:break-word}div.spwidget-board div.spwidget-board-headers-cntr .spwidget-board-header-title{display:inline-block}div.spwidget-board div.spwidget-board-headers-cntr .spwidget-state-item-stat-cntr{display:inline-block;font-size:.8em;float:right}div.spwidget-board div.spwidget-board-headers-cntr .spwidget-item-stat{display:inline-block;min-width:2em;padding:0 .2em;text-align:center}div.spwidget-board div.spwidget-board-states div.spwidget-board-state{margin-bottom:1em;min-height:10em}div.spwidget-board div.spwidget-board-state div.spwidget-board-state-item{padding:.2em;margin:.5em .2em;font-weight:400;cursor:move;overflow:hidden;word-break:break-word}div.spwidget-board div.spwidget-board-state-item div.spwidget-board-item-actions{margin-top:.2em;padding:.2em .5em;overflow:hidden}div.spwidget-board .spwidget-board-placeholder{height:3em}div.spwidget-board-settings{font-size:.8em;margin:.2em}div.spwidget-board-settings div.spwidget-board-column-list-cntr{z-index:5;position:absolute}div.spwidget-board-settings div.spwidget-board-column-list-cntr>div{padding:.2em}div.spwidget-board-settings div.spwidget-board-column-list-cntr>div:first-child,div.spwidget-board-settings div.spwidget-board-column-list-cntr>div:last-child{text-align:right}div.spwidget-board-settings div.spwidget-board-column-list{width:20em;height:17em;overflow:auto;position:relative}div.spwidget-board-settings div.spwidget-board-column-list-cntr .spwidget-board-msg{position:absolute;top:1px;left:1px;padding:.2em}div.spwidget-board-settings div.ui-state-default{position:relative}div.spwidget-board-settings div.spwidget-board-column-list>a{display:block;margin:.2em;padding:.2em}div.spwidget-board-settings div.spwidget-board-column-list>a>span.ui-icon{display:inline-block}div.spwidget-board .spwidget-states-3 div.spwidget-board-state{width:32.4%}div.spwidget-board .spwidget-states-4 div.spwidget-board-state{width:24%}div.spwidget-board .spwidget-states-5 div.spwidget-board-state{width:19.1%}div.spwidget-board .spwidget-states-6 div.spwidget-board-state{width:15.8%}div.spwidget-board .spwidget-states-7 div.spwidget-board-state{width:13.4%}div.spwidget-board .spwidget-states-8 div.spwidget-board-state{width:11.6%}div.spwidget-board .spwidget-states-9 div.spwidget-board-state{width:10.2%}div.spwidget-board .spwidget-states-10 div.spwidget-board-state{width:9.1%}.spwidget-date-cntr{display:inline-block;position:relative}.spwidget-date-cntr div.spwidget-date-input-cntr{position:relative}.spwidget-date-cntr input{width:99%}.spwidget-date-cntr img.ui-datepicker-trigger{display:block;position:absolute;right:2%;top:.3em}.spwidget-date-cntr .spwidgets-item-remove{color:red;font-size:xx-small;vertical-align:super;cursor:pointer}.spwidget-date-cntr div.spwidget-datetime-selector{padding:.5em;position:absolute;width:28em;z-index:1}.spwidget-date-cntr div.spwidget-datetime-selector div.ui-datepicker-inline{width:14em}.spwidget-date-cntr div.spwidget-datetime-selector div.spwidget-date-selector,.spwidget-date-cntr div.spwidget-datetime-selector div.spwidget-time-selector{float:left}.spwidget-date-cntr div.spwidget-selectors:before{content:"";display:table;line-height:0}.spwidget-date-cntr div.spwidget-selectors:after{content:"";display:table;line-height:0;clear:both}.spwidget-date-cntr div.spwidget-datetime-selector select.spwidget-hour,.spwidget-date-cntr div.spwidget-datetime-selector select.spwidget-min,.spwidget-date-cntr div.spwidget-datetime-selector select.spwidget-ampm{font-size:1.2em}.spwidget-date-cntr div.spwidget-time-selector{margin-left:.2em;width:11em}.spwidget-date-cntr div.spwidget-time-selector-cntr{padding:.2em}.spwidget-date-cntr div.spwidget-time-selector div.ui-widget-header{text-align:center;line-height:2em;margin-bottom:.5em}.spwidget-date-cntr .spwidget-time-hour,.spwidget-date-cntr .spwidget-time-min,.spwidget-date-cntr .spwidget-time-ampm{margin-top:.2em;padding:.2em}.spwidget-date-cntr .spwidget-time-selector-cntr select,.spwidget-date-cntr .spwidget-time-selector-cntr label{overflow:hidden;display:inline-block;font-weight:700}.spwidget-date-cntr .spwidget-time-selector-cntr select{width:4em}.spwidget-date-cntr .spwidget-time-selector-cntr label{width:5em;font-size:.9em}.spwidget-date-cntr .spwidget-inline div.spwidget-datetime-selector{position:relative;width:26em}.spwidget-btn-set{display:none;position:absolute;right:.2em;bottom:.2em}.spwidget-date-multiples-cntr .spwidget-btn-set{display:block}.spwidgets-lookup-cntr{position:relative;display:inline-block;zoom:1;*display:inline}.spwidgets-lookup-cntr .spwidgets-lookup-selected{-moz-appearance:textfield;-webkit-appearance:textfield;background-color:#fff;background-color:-moz-field;border:1px solid darkgray;box-shadow:1px 1px 1px 0 lightgray inset;font:-moz-field;font:-webkit-small-control;margin-top:5px;padding:2px 5px}.spwidgets-lookup-cntr .spwidgets-lookup-selected .spwidgets-item{display:inline-block;margin-left:.5em}.spwidgets-lookup-cntr .spwidgets-item:first-child{margin-left:0}.spwidgets-lookup-cntr .spwidgets-item-remove{color:red;font-size:xx-small;vertical-align:super;cursor:pointer}.spwidgets-lookup-cntr .spwidgets-lookup-input{margin:.2em 0;position:relative}.spwidgets-lookup-cntr .spwidgets-lookup-input input{width:99%}.spwidgets-lookup-cntr ul.ui-autocomplete{overflow:auto;z-index:1}.spwidgets-lookup-cntr div.spwidget-lookup-readyonly .spwidgets-lookup-selected{-moz-appearance:none;-webkit-appearance:none;background-color:transparent;border:none;box-shadow:none;font:inherit}.spwidgets-lookup-cntr div.spwidget-lookup-readyonly .spwidgets-item-remove{display:none}.spwidgets-lookup-cntr .spwidget-lookup-selector-showhide{background-repeat:no-repeat;background-image:url("/_layouts/images/bizdatacontentsource.gif");cursor:pointer;display:block;position:absolute;text-indent:-99999px;z-index:5;height:16px;width:16px;right:5px;top:.3em}.spwidgets-lookup-cntr div.spwidget-lookup-selector-cntr{display:none;position:absolute;left:0;z-index:10;padding:.2em;width:98%;font-size:.8em}.spwidgets-lookup-cntr div.spwidget-lookup-selector-cntr>.ui-state-default{padding:.2em;text-align:right}.spwidgets-lookup-cntr div.spwidget-lookup-selector-item-cntr{height:15em;overflow:auto;padding:.2em;font-size:1em}.spwidgets-lookup-cntr div.spwidget-lookup-selector-item-cntr .ui-state-highlight{padding:.5em;margin:1em .2em;text-align:center;font-size:1.1em;font-weight:700}.spwidgets-lookup-cntr div.spwidget-lookup-selector-item-cntr .spwidget-lookup-selector-next{cursor:pointer}.spwidgets-lookup-cntr div.spwidget-lookup-selector-item-cntr .spwidget-lookup-item{padding:.2em .5em;margin:.2em;cursor:pointer;font-weight:400}.pt-pickSPUser .pt-pickSPUser-selected .pt-pickSPUser-person{float:left;margin-left:.2em}.pt-pickSPUser .pt-pickSPUser-hint{font-size:.9em}.pt-pickSPUser div.pt-pickSPUser-input input.ui-autocomplete{width:99%}.pt-pickSPUser div.pt-pickSPUser-input ul.ui-autocomplete{z-index:1}.pt-pickSPUser .pt-pickSPUser-person-cntr{margin:.2em 0;padding:.2em;position:relative}.pt-pickSPUser .pt-pickSPUser-person-cntr .pt-person-name{padding-right:2em}.pt-pickSPUser .pt-pickSPUser-person-cntr .pt-pickSPUser-person-actions{position:absolute;right:1px;top:1px;padding:.2em;display:none}.pt-pickSPUser .pt-pickSPUser-person-cntr .pt-pickSPUser-person-actions .pt-pickSPUser-person-action-links,.pt-pickSPUser .pt-pickSPUser-person-cntr .pt-pickSPUser-person-actions .pt-pickSPUser-person-action-links .tt-confirm-delete{float:right}.pt-pickSPUser .pt-pickSPUser-person-cntr.ui-state-hover .pt-pickSPUser-person-actions,.pt-pickSPUser .pt-pickSPUser-person-cntr .pt-pickSPUser-person-actions.tt-confirm,.pt-pickSPUser .pt-pickSPUser-person-cntr .pt-pickSPUser-person-actions a{display:block;float:right}.ui-autocomplete-loading{background:#fff url(\'/_layouts/images/loading.gif\') right center no-repeat}div.spwidget-filter{width:100%;position:relative}div.spwidget-filter .spwidget-date-cntr,div.spwidget-filter .spwidgets-lookup-cntr{display:block}div.spwidget-filter .spwidget-filter-column-cntr{overflow:auto;position:relative}div.spwidget-filter .spwidget-type-text input.spwidget-filter-input,div.spwidget-filter .spwidget-type-people input.ui-autocomplete-input,div.spwidget-filter div.spwidget-type-choice div.spwidget-filter-value-input{width:95%}div.spwidget-filter .spwidgets-lookup-cntr{width:96%}div.spwidget-filter .spwidget-date-cntr div.spwidget-date-input-cntr{width:97%}div.spwidget-filter div.spwidget-column{padding:.5em;margin:.5em;position:relative;border-bottom:1px solid darkgray;box-shadow:1px 1px 1px 0 lightgray inset}div.spwidget-filter div.spwidget-column-actions{position:absolute;right:1%;top:10%}div.spwidget-filter div.spwidget-column-actions a{display:block}div.spwidget-filter div.spwidget-column-sort-actions{display:none}div.spwidget-filter div.spwidget-has-sort-order div.spwidget-column-sort-actions{display:block}div.spwidget-filter div.spwidget-filter-type-cntr,div.spwidget-filter div.spwidget-column-actions a{opacity:.6;filter:alpha(opacity=60)}div.spwidget-filter div.spwidget-filter-type-cntr:hover,div.spwidget-filter div.spwidget-column-actions a:hover{opacity:1}div.spwidget-filter div.spwidget-filter-type-cntr{position:absolute;font-size:.8em;top:.6em;right:8%}div.spwidget-filter div.spwidget-filter-type-cntr select{text-overflow:ellipsis;width:5em}div.spwidget-filter div.spwidget-filter-value-cntr{width:96%}div.spwidget-filter div.spwidget-filter-value-cntr>label{display:block;padding:.2em;font-weight:700}div.spwidget-filter div.spwidget-column-dirty div.spwidget-filter-value-cntr>label{color:red}div.spwidget-filter .spwidget-tooltip{display:block;font-size:.8em;font-style:italic}div.spwidget-filter div.spwidgets-lookup-cntr div.spwidgets-lookup-selected>div.spwidgets-item{display:block;margin-left:0}div.spwidget-filter div.spwidget-type-choice div.spwidget-filter-value-input{max-height:6em;overflow:auto;-moz-appearance:textfield;-webkit-appearance:textfield;background-color:#fff;background-color:-moz-field;border:1px solid darkgray;box-shadow:1px 1px 1px 0 lightgray inset;font:-moz-field;font:-webkit-small-control;padding:2px 5px}div.spwidget-filter div.spwidget-type-choice div.spwidget-filter-value-input label{display:block;padding:.2em}div.spwidget-filter .spwidget-disabled{-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";filter:alpha(opacity=50);opacity:.5}div.spwidget-filter div.spwidget-filter-button-cntr{padding:.5em 4%;margin-top:.5em;text-align:right}.spcontrolupload .mainContainer{position:relative;display:block;height:4em}.spcontrolupload .iFrameWindow,.spcontrolupload .buttonPane{position:absolute;top:0;height:3em}.spcontrolupload .spwidget-success-cntr,.spcontrolupload .loadingOverlay{position:absolute;top:0;height:3em;width:100%}.spcontrolupload .buttonPane{left:0;width:10%;overflow:hidden;cursor:pointer}.spcontrolupload .buttonPane .upload_button{font-weight:700;font-size:1.1em;text-align:center;margin-top:.8em}.spcontrolupload .iFrameWindow{width:90%;left:10%;overflow:hidden}.spcontrolupload .iFrameWindow iframe{overflow:auto;width:100%;height:99%}.spcontrolupload .spwidget-show-full-form .iFrameWindow{overflow:auto;width:100%;margin:0;left:0;right:auto;z-index:5}.spcontrolupload .loadingOverlayMsg{font-size:1em;background-position:left top;background-repeat:no-repeat;background-image:url(\'/_layouts/images/loadingcirclests16.gif\');margin:.5em;padding-left:25px}.spcontrolupload .spwidget-success-cntr,.spcontrolupload .spwidget-error-cntr{display:none}.spcontrolupload div.spwidget-msg-cntr{margin:.5em .5em .5em 3em;font-size:1em;background-position:left top;background-repeat:no-repeat}.spcontrolupload .spwidget-close{color:red;font-size:xx-small;font-weight:700;vertical-align:super;cursor:pointer}.spcontrolupload .spwidget-success-cntr div.spwidget-msg-cntr{background-image:url(\'/_layouts/images/STS_ListItem_43216.gif\');padding-left:30px}.spcontrolupload .spwidget-error-cntr{bottom:-1.5em;left:0;width:100%;position:absolute}.spcontrolupload-dev-mode .iFrameWindow{overflow:auto!important;height:auto!important;z-index:5!important}.spcontrolupload-dev-mode .iFrameWindow iframe{overflow:scroll!important}')})}();
//# sourceMappingURL=jquery.SPWidgets.min.js.map